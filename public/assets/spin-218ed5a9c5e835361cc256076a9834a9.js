/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */
!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var A,i=document.createElement(t||"div");for(A in e)i[A]=e[A];return i}function e(t){for(var e=1,A=arguments.length;A>e;e++)t.appendChild(arguments[e]);return t}function A(t,e,A,i){var n=["opacity",e,~~(100*t),A,i].join("-"),r=.01+A/i*100,s=Math.max(1-(1-t)/e*(100-r),t),o=l.substring(0,l.indexOf("Animation")).toLowerCase(),a=o&&"-"+o+"-"||"";return c[n]||(u.insertRule("@"+a+"keyframes "+n+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",u.cssRules.length),c[n]=1),n}function i(t,e){var A,i,n=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<h.length;i++)if(A=h[i]+e,void 0!==n[A])return A;return void 0!==n[e]?e:void 0}function n(t,e){for(var A in e)t.style[i(t,A)||A]=e[A];return t}function r(t){for(var e=1;e<arguments.length;e++){var A=arguments[e];for(var i in A)void 0===t[i]&&(t[i]=A[i])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function o(t){this.opts=r(t||{},o.defaults,d)}function a(){function A(e,A){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',A)}u.addRule(".spin-vml","behavior:url(#default#VML)"),o.prototype.lines=function(t,i){function r(){return n(A("group",{coordsize:h+" "+h,coordorigin:-l+" "+-l}),{width:h,height:h})}function o(t,o,a){e(u,e(n(r(),{rotation:360/i.lines*t+"deg",left:~~o}),e(n(A("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),A("fill",{color:s(i.color,t),opacity:i.opacity}),A("stroke",{opacity:0}))))}var a,l=i.length+i.width,h=2*l,c=2*-(i.width+i.length)+"px",u=n(r(),{position:"absolute",top:c,left:c});if(i.shadow)for(a=1;a<=i.lines;a++)o(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)o(a);return e(t,u)},o.prototype.opacity=function(t,e,A,i){var n=t.firstChild;i=i.shadow&&i.lines||0,n&&e+i<n.childNodes.length&&(n=n.childNodes[e+i],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=A))}}var l,h=["webkit","Moz","ms","O"],c={},u=function(){var A=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],A),A.sheet||A.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};o.defaults={},r(o.prototype,{spin:function(e){this.stop();var A=this,i=A.opts,r=A.el=n(t(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});i.radius+i.length+i.width;if(n(r,{left:i.left,top:i.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),A.lines(r,A.opts),!l){var s,o=0,a=(i.lines-1)*(1-i.direction)/2,h=i.fps,c=h/i.speed,u=(1-i.opacity)/(c*i.trail/100),d=c/i.lines;!function f(){o++;for(var t=0;t<i.lines;t++)s=Math.max(1-(o+(i.lines-t)*d)%c*u,i.opacity),A.opacity(r,t*i.direction+a,s,i);A.timeout=A.el&&setTimeout(f,~~(1e3/h))}()}return A},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function o(e,A){return n(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:A,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*h+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var a,h=0,c=(r.lines-1)*(1-r.direction)/2;h<r.lines;h++)a=n(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:l&&A(r.opacity,r.trail,c+h*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(a,n(o("#000","0 0 4px #000"),{top:"2px"})),e(i,e(a,o(s(r.color,h),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,A){e<t.childNodes.length&&(t.childNodes[e].style.opacity=A)}});var f=n(t("group"),{behavior:"url(#default#VML)"});return!i(f,"transform")&&f.adj?a():l=i(f,"animation"),o});