/*!
 * Infinite Scroll PACKAGED v3.0.2
 * Automatically add next page
 *
 * Licensed GPLv3 for open source use
 * or Infinite Scroll Commercial License for commercial use
 *
 * https://infinite-scroll.com
 * Copyright 2017 Metafizzy
 */
!function(A,t){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return t(A,e)}):"object"==typeof module&&module.exports?module.exports=t(A,require("jquery")):A.jQueryBridget=t(A,A.jQuery)}(window,function(A,t){"use strict";function e(e,r,s){function a(A,t,i){var n,r="$()."+e+'("'+t+'")';return A.each(function(A,a){var l=s.data(a,e);if(!l)return void o(e+" not initialized. Cannot call methods, i.e. "+r);var c=l[t];if(!c||"_"==t.charAt(0))return void o(r+" is not a valid method");var h=c.apply(l,i);n=void 0===n?h:n}),void 0!==n?n:A}function l(A,t){A.each(function(A,i){var n=s.data(i,e);n?(n.option(t),n._init()):(n=new r(i,t),s.data(i,e,n))})}s=s||t||A.jQuery,s&&(r.prototype.option||(r.prototype.option=function(A){s.isPlainObject(A)&&(this.options=s.extend(!0,this.options,A))}),s.fn[e]=function(A){if("string"==typeof A){var t=n.call(arguments,1);return a(this,A,t)}return l(this,A),this},i(s))}function i(A){!A||A&&A.bridget||(A.bridget=e)}var n=Array.prototype.slice,r=A.console,o="undefined"==typeof r?function(){}:function(A){r.error(A)};return i(t||A.jQuery),e}),function(A,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():A.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function A(){}var t=A.prototype;return t.on=function(A,t){if(A&&t){var e=this._events=this._events||{},i=e[A]=e[A]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(A,t){if(A&&t){this.on(A,t);var e=this._onceEvents=this._onceEvents||{},i=e[A]=e[A]||{};return i[t]=!0,this}},t.off=function(A,t){var e=this._events&&this._events[A];if(e&&e.length){var i=e.indexOf(t);return-1!=i&&e.splice(i,1),this}},t.emitEvent=function(A,t){var e=this._events&&this._events[A];if(e&&e.length){var i=0,n=e[i];t=t||[];for(var r=this._onceEvents&&this._onceEvents[A];n;){var o=r&&r[n];o&&(this.off(A,n),delete r[n]),n.apply(this,t),i+=o?0:1,n=e[i]}return this}},t.allOff=t.removeAllListeners=function(){delete this._events,delete this._onceEvents},A}),function(A,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():A.matchesSelector=t()}(window,function(){"use strict";var A=function(){var A=window.Element.prototype;if(A.matches)return"matches";if(A.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],e=0;e<t.length;e++){var i=t[e],n=i+"MatchesSelector";if(A[n])return n}}();return function(t,e){return t[A](e)}}),function(A,t){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return t(A,e)}):"object"==typeof module&&module.exports?module.exports=t(A,require("desandro-matches-selector")):A.fizzyUIUtils=t(A,A.matchesSelector)}(window,function(A,t){var e={};e.extend=function(A,t){for(var e in t)A[e]=t[e];return A},e.modulo=function(A,t){return(A%t+t)%t},e.makeArray=function(A){var t=[];if(Array.isArray(A))t=A;else if(A&&"object"==typeof A&&"number"==typeof A.length)for(var e=0;e<A.length;e++)t.push(A[e]);else t.push(A);return t},e.removeFrom=function(A,t){var e=A.indexOf(t);-1!=e&&A.splice(e,1)},e.getParent=function(A,e){for(;A.parentNode&&A!=document.body;)if(A=A.parentNode,t(A,e))return A},e.getQueryElement=function(A){return"string"==typeof A?document.querySelector(A):A},e.handleEvent=function(A){var t="on"+A.type;this[t]&&this[t](A)},e.filterFindElements=function(A,i){A=e.makeArray(A);var n=[];return A.forEach(function(A){if(A instanceof HTMLElement){if(!i)return void n.push(A);t(A,i)&&n.push(A);for(var e=A.querySelectorAll(i),r=0;r<e.length;r++)n.push(e[r])}}),n},e.debounceMethod=function(A,t,e){var i=A.prototype[t],n=t+"Timeout";A.prototype[t]=function(){var A=this[n];A&&clearTimeout(A);var t=arguments,r=this;this[n]=setTimeout(function(){i.apply(r,t),delete r[n]},e||100)}},e.docReady=function(A){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(A):document.addEventListener("DOMContentLoaded",A)},e.toDashed=function(A){return A.replace(/(.)([A-Z])/g,function(A,t,e){return t+"-"+e}).toLowerCase()};var i=A.console;return e.htmlInit=function(t,n){e.docReady(function(){var r=e.toDashed(n),o="data-"+r,s=document.querySelectorAll("["+o+"]"),a=document.querySelectorAll(".js-"+r),l=e.makeArray(s).concat(e.makeArray(a)),c=o+"-options",h=A.jQuery;l.forEach(function(A){var e,r=A.getAttribute(o)||A.getAttribute(c);try{e=r&&JSON.parse(r)}catch(s){return void(i&&i.error("Error parsing "+o+" on "+A.className+": "+s))}var a=new t(A,e);h&&h.data(A,n,a)})})},e}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(e,i){return t(A,e,i)}):"object"==typeof module&&module.exports?module.exports=t(A,require("ev-emitter"),require("fizzy-ui-utils")):A.InfiniteScroll=t(A,A.EvEmitter,A.fizzyUIUtils)}(window,function(A,t,e){function i(A,t){var o=e.getQueryElement(A);if(!o)return void console.error("Bad element for InfiniteScroll: "+(o||A));if(A=o,A.infiniteScrollGUID){var s=r[A.infiniteScrollGUID];return s.option(t),s}this.element=A,this.options=e.extend({},i.defaults),this.option(t),n&&(this.$element=n(this.element)),this.create()}var n=A.jQuery,r={};i.defaults={},i.create={},i.destroy={};var o=i.prototype;e.extend(o,t.prototype);var s=0;o.create=function(){var A=this.guid=++s;if(this.element.infiniteScrollGUID=A,r[A]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath(),!this.getPath)return void console.error("Disabling InfiniteScroll");this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit();for(var t in i.create)i.create[t].call(this)},o.option=function(A){e.extend(this.options,A)},o.callOnInit=function(){var A=this.options.onInit;A&&A.call(this,this)},o.dispatchEvent=function(A,t,e){this.log(A,e);var i=t?[t].concat(e):e;if(this.emitEvent(A,i),n&&this.$element){A+=".infiniteScroll";var r=A;if(t){var o=n.Event(t);o.type=A,r=o}this.$element.trigger(r,e)}};var a={initialized:function(A){return"on "+A},request:function(A){return"URL: "+A},load:function(A,t){return(A.title||"")+". URL: "+t},error:function(A,t){return A+". URL: "+t},append:function(A,t,e){return e.length+" items. URL: "+t},last:function(A,t){return"URL: "+t},history:function(A,t){return"URL: "+t},pageIndex:function(A,t){return"current page determined to be: "+A+" from "+t}};o.log=function(A,t){if(this.options.debug){var e="[InfiniteScroll] "+A,i=a[A];i&&(e+=". "+i.apply(this,t)),console.log(e)}},o.updateMeasurements=function(){this.windowHeight=A.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+A.pageYOffset},o.updateScroller=function(){var t=this.options.elementScroll;if(!t)return void(this.scroller=A);if(this.scroller=t===!0?this.element:e.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t},o.updateGetPath=function(){var A=this.options.path;if(!A)return void console.error("InfiniteScroll path option required. Set as: "+A);var t=typeof A;if("function"==t)return void(this.getPath=A);var e="string"==t&&A.match("{{#}}");return e?void this.updateGetPathTemplate(A):void this.updateGetPathSelector(A)},o.updateGetPathTemplate=function(A){this.getPath=function(){var t=this.pageIndex+1;return A.replace("{{#}}",t)}.bind(this);var t=A.replace("{{#}}","(\\d\\d?\\d?)"),e=new RegExp(t),i=location.href.match(e);i&&(this.pageIndex=parseInt(i[1],10),this.log("pageIndex",this.pageIndex,"template string"))};var l=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return o.updateGetPathSelector=function(A){var t=document.querySelector(A);if(!t)return void console.error("Bad InfiniteScroll path option. Next link not found: "+A);for(var e,i,n=t.getAttribute("href"),r=0;n&&r<l.length;r++){i=l[r];var o=n.match(i);if(o){e=o.slice(1);break}}return e?(this.isPathSelector=!0,this.getPath=function(){var A=this.pageIndex+1;return e[0]+A+e[2]}.bind(this),this.pageIndex=parseInt(e[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void console.error("InfiniteScroll unable to parse next link href: "+n)},o.updateGetAbsolutePath=function(){var A=this.getPath(),t=A.match(/^http/)||A.match(/^\//);if(t)return void(this.getAbsolutePath=this.getPath);var e=location.pathname,i=e.substring(0,e.lastIndexOf("/"));this.getAbsolutePath=function(){return i+"/"+this.getPath()}},i.create.hideNav=function(){var A=e.getQueryElement(this.options.hideNav);A&&(A.style.display="none",this.nav=A)},i.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},o.destroy=function(){this.allOff();for(var A in i.destroy)i.destroy[A].call(this);delete this.element.infiniteScrollGUID,delete r[this.guid]},i.throttle=function(A,t){t=t||200;var e,i;return function(){var n=+new Date,r=arguments,o=function(){e=n,A.apply(this,r)}.bind(this);e&&e+t>n?(clearTimeout(i),i=setTimeout(o,t)):o()}},i.data=function(A){A=e.getQueryElement(A);var t=A&&A.infiniteScrollGUID;return t&&r[t]},i.setJQuery=function(A){n=A},e.htmlInit(i,"infinite-scroll"),n&&n.bridget&&n.bridget("infiniteScroll",i),i}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(e){return t(A,e)}):"object"==typeof module&&module.exports?module.exports=t(A,require("./core")):t(A,A.InfiniteScroll)}(window,function(A,t){function e(A){for(var t=document.createDocumentFragment(),e=0;A&&e<A.length;e++)t.appendChild(A[e]);return t}function i(A){for(var t=A.querySelectorAll("script"),e=0;e<t.length;e++){var i=t[e],r=document.createElement("script");n(i,r),i.parentNode.replaceChild(r,i)}}function n(A,t){for(var e=A.attributes,i=0;i<e.length;i++){var n=e[i];t.setAttribute(n.name,n.value)}}function r(A,t,e,i){var n=new XMLHttpRequest;n.open("GET",A,!0),n.responseType=t||"",n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onload=function(){if(200==n.status)e(n.response);else{var A=new Error(n.statusText);i(A)}},n.onerror=function(){var t=new Error("Network error requesting "+A);i(t)},n.send()}var o=t.prototype;return t.defaults.loadOnScroll=!0,t.defaults.checkLastPage=!0,t.defaults.responseType="document",t.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("append",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},o.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},o.loadNextPage=function(){if(!this.isLoading&&this.canLoad){var A=this.getAbsolutePath();this.isLoading=!0;var t=function(t){this.onPageLoad(t,A)}.bind(this),e=function(t){this.onPageError(t,A)}.bind(this);r(A,this.options.responseType,t,e),this.dispatchEvent("request",null,[A])}},o.onPageLoad=function(A,t){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[A,t]),this.appendNextPage(A,t),A},o.appendNextPage=function(A,t){var i=this.options.append,n="document"==this.options.responseType;if(n&&i){var r=A.querySelectorAll(i),o=e(r),s=function(){this.appendItems(r,o),this.isLoading=!1,this.dispatchEvent("append",null,[A,t,r])}.bind(this);this.options.outlayer?this.appendOutlayerItems(o,s):s()}},o.appendItems=function(A,t){A&&A.length&&(t=t||e(A),i(t),this.element.appendChild(t))},o.appendOutlayerItems=function(e,i){var n=t.imagesLoaded||A.imagesLoaded;return n?void n(e,i):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},o.onAppendOutlayer=function(A,t,e){this.options.outlayer.appended(e)},o.checkLastPage=function(A,t){var e=this.options.checkLastPage;if(e){var i=this.options.path;if("function"==typeof i){var n=this.getPath();if(!n)return void this.lastPageReached(A,t)}var r;if("string"==typeof e?r=e:this.isPathSelector&&(r=i),r&&A.querySelector){var o=A.querySelector(r);o||this.lastPageReached(A,t)}}},o.lastPageReached=function(A,t){this.canLoad=!1,this.dispatchEvent("last",null,[A,t])},o.onPageError=function(A,t){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[A,t]),A},t.create.prefill=function(){if(this.options.prefill){var A=this.options.append;if(!A)return void console.error("append option required for prefill. Set as :"+A);this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},o.prefill=function(){var A=this.getPrefillDistance();this.isPrefilling=A>=0,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},o.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},o.stopPrefill=function(){console.log("stopping prefill"),this.off("append",this.prefill)},t}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(e,i){return t(A,e,i)}):"object"==typeof module&&module.exports?module.exports=t(A,require("./core"),require("fizzy-ui-utils")):t(A,A.InfiniteScroll,A.fizzyUIUtils)}(window,function(A,t,e){var i=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var A=this.options.scrollThreshold,t=A||0===A;t&&this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},i.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},i.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},i.bindScrollWatchEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.pageScrollHandler),A[e]("resize",this.resizeHandler)},i.onPageScroll=t.throttle(function(){var A=this.getBottomDistance();A<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),i.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},i.getWindowBottomDistance=function(){var t=this.top+this.element.clientHeight,e=A.pageYOffset+this.windowHeight;return t-e},i.getElementBottomDistance=function(){var A=this.scroller.scrollHeight,t=this.scroller.scrollTop+this.scroller.clientHeight;return A-t},i.onResize=function(){this.updateMeasurements()},e.debounceMethod(t,"onResize",150),t}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(e,i){return t(A,e,i)}):"object"==typeof module&&module.exports?module.exports=t(A,require("./core"),require("fizzy-ui-utils")):t(A,A.InfiniteScroll,A.fizzyUIUtils)}(window,function(A,t,e){var i=t.prototype;t.defaults.history="replace";var n=document.createElement("a");return t.create.history=function(){if(this.options.history){n.href=this.getAbsolutePath();var A=n.origin||n.protocol+"//"+n.host,t=A==location.origin;return t?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+n.origin+" on "+location.origin+" . History behavior disabled.")}},i.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},i.bindHistoryAppendEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.scrollHistoryHandler),A[e]("unload",this.unloadHandler)},i.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=i.destroyHistory=function(){var A=this.options.history&&this.options.append;A&&this.bindHistoryAppendEvents(!1)},i.onAppendHistory=function(A,t,e){var i=e[0],r=this.getElementScrollY(i);n.href=t,this.scrollPages.push({top:r,path:n.href,title:A.title})},i.getElementScrollY=function(A){return this.options.elementScroll?this.getElementElementScrollY(A):this.getElementWindowScrollY(A)},i.getElementWindowScrollY=function(t){var e=t.getBoundingClientRect();return e.top+A.pageYOffset},i.getElementElementScrollY=function(A){return A.offsetTop-this.top},i.onScrollHistory=function(){for(var A,t,e=this.getScrollViewY(),i=0;i<this.scrollPages.length;i++){var n=this.scrollPages[i];if(n.top>=e)break;A=i,t=n}A!=this.scrollPageIndex&&(this.scrollPageIndex=A,this.setHistory(t.title,t.path))},e.debounceMethod(t,"onScrollHistory",150),i.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:A.pageYOffset+this.windowHeight/2},i.setHistory=function(A,t){var e=this.options.history,i=e&&history[e+"State"];i&&(history[e+"State"](null,A,t),this.options.historyTitle&&(document.title=A),this.dispatchEvent("history",null,[A,t]))},i.onUnload=function(){var t=this.scrollPageIndex;if(0!==t){var e=this.scrollPages[t],i=A.pageYOffset-e.top+this.top;this.destroyHistory(),scrollTo(0,i)}},i.onPageLoadHistory=function(A,t){this.setHistory(A.title,t)},t}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(e,i){return t(A,e,i)}):"object"==typeof module&&module.exports?module.exports=t(A,require("./core"),require("fizzy-ui-utils")):t(A,A.InfiniteScroll,A.fizzyUIUtils)}(window,function(A,t,e){function i(A,t){this.element=A,this.infScroll=t,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),t.on("request",this.disable.bind(this)),t.on("load",this.enable.bind(this)),t.on("error",this.hide.bind(this)),t.on("last",this.hide.bind(this))}return t.create.button=function(){var A=e.getQueryElement(this.options.button);return A?void(this.button=new i(A,this)):void 0},t.destroy.button=function(){this.button&&this.button.destroy()},i.prototype.onClick=function(A){A.preventDefault(),this.infScroll.loadNextPage()},i.prototype.enable=function(){this.element.removeAttribute("disabled")},i.prototype.disable=function(){this.element.disabled="disabled"},i.prototype.hide=function(){this.element.style.display="none"},i.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},t.Button=i,t}),function(A,t){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(e,i){return t(A,e,i)}):"object"==typeof module&&module.exports?module.exports=t(A,require("./core"),require("fizzy-ui-utils")):t(A,A.InfiniteScroll,A.fizzyUIUtils)}(window,function(A,t,e){function i(A){r(A,"none")}function n(A){r(A,"block")}function r(A,t){A&&(A.style.display=t)}var o=t.prototype;return t.create.status=function(){var A=e.getQueryElement(this.options.status);A&&(this.statusElement=A,this.statusEventElements={request:A.querySelector(".infinite-scroll-request"),error:A.querySelector(".infinite-scroll-error"),last:A.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},o.bindHideStatus=function(A){var t=this.options.append?"append":"load";this[A](t,this.hideAllStatus)},o.showRequestStatus=function(){this.showStatus("request")},o.showErrorStatus=function(){this.showStatus("error")},o.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},o.showStatus=function(A){n(this.statusElement),this.hideStatusEventElements();var t=this.statusEventElements[A];n(t)},o.hideAllStatus=function(){i(this.statusElement),this.hideStatusEventElements()},o.hideStatusEventElements=function(){for(var A in this.statusEventElements){var t=this.statusEventElements[A];i(t)}},t}),/*!
 * Infinite Scroll v3.0.2
 * Automatically add next page
 *
 * Licensed GPLv3 for open source use
 * or Infinite Scroll Commercial License for commercial use
 *
 * https://infinite-scroll.com
 * Copyright 2017 Metafizzy
 */
function(A,t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(A){return A}),/*!
 * imagesLoaded v4.1.3
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(A,t){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(e){return t(A,e)}):"object"==typeof module&&module.exports?module.exports=t(A,require("ev-emitter")):A.imagesLoaded=t(A,A.EvEmitter)}("undefined"!=typeof window?window:this,function(A,t){function e(A,t){for(var e in t)A[e]=t[e];return A}function i(A){var t=[];if(Array.isArray(A))t=A;else if("number"==typeof A.length)for(var e=0;e<A.length;e++)t.push(A[e]);else t.push(A);return t}function n(A,t,r){return this instanceof n?("string"==typeof A&&(A=document.querySelectorAll(A)),this.elements=i(A),this.options=e({},this.options),"function"==typeof t?r=t:e(this.options,t),r&&this.on("always",r),this.getImages(),s&&(this.jqDeferred=new s.Deferred),void setTimeout(function(){this.check()}.bind(this))):new n(A,t,r)}function r(A){this.img=A}function o(A,t){this.url=A,this.element=t,this.img=new Image}var s=A.jQuery,a=A.console;n.prototype=Object.create(t.prototype),n.prototype.options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(A){"IMG"==A.nodeName&&this.addImage(A),this.options.background===!0&&this.addElementBackgroundImages(A);var t=A.nodeType;if(t&&l[t]){for(var e=A.querySelectorAll("img"),i=0;i<e.length;i++){var n=e[i];this.addImage(n)}if("string"==typeof this.options.background){var r=A.querySelectorAll(this.options.background);for(i=0;i<r.length;i++){var o=r[i];this.addElementBackgroundImages(o)}}}};var l={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(A){var t=getComputedStyle(A);if(t)for(var e=/url\((['"])?(.*?)\1\)/gi,i=e.exec(t.backgroundImage);null!==i;){var n=i&&i[2];n&&this.addBackground(n,A),i=e.exec(t.backgroundImage)}},n.prototype.addImage=function(A){var t=new r(A);this.images.push(t)},n.prototype.addBackground=function(A,t){var e=new o(A,t);this.images.push(e)},n.prototype.check=function(){function A(A,e,i){setTimeout(function(){t.progress(A,e,i)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",A),t.check()}):void this.complete()},n.prototype.progress=function(A,t,e){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!A.isLoaded,this.emitEvent("progress",[this,A,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,A),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+e,A,t)},n.prototype.complete=function(){var A=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(A,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var A=this.getIsImageComplete();return A?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(A,t){this.isLoaded=A,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(A){var t="on"+A.type;this[t]&&this[t](A)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype=Object.create(r.prototype),o.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var A=this.getIsImageComplete();A&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(A,t){this.isLoaded=A,this.emitEvent("progress",[this,this.element,t])},n.makeJQueryPlugin=function(t){t=t||A.jQuery,t&&(s=t,s.fn.imagesLoaded=function(A,t){var e=new n(this,A,t);return e.jqDeferred.promise(s(this))})},n.makeJQueryPlugin(),n});