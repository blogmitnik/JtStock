/*!
 * Column visibility buttons for Buttons and DataTables.
 * 2016 SpryMedia Ltd - datatables.net/license
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,i){return e||(e=window),i&&i.fn.dataTable||(i=require("datatables.net")(e,i).$),i.fn.dataTable.Buttons||require("datatables.net-buttons")(e,i),t(i,e,e.document)}:t(jQuery,window,document)}(function(t,e,i,A){"use strict";var n=t.fn.dataTable;return t.extend(n.ext.buttons,{colvis:function(t,e){return{extend:"collection",text:function(t){return t.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:e.columns}]}},columnsToggle:function(t,e){var i=t.columns(e.columns).indexes().map(function(t){return{extend:"columnToggle",columns:t}}).toArray();return i},columnToggle:function(t,e){return{extend:"columnVisibility",columns:e.columns}},columnsVisibility:function(t,e){var i=t.columns(e.columns).indexes().map(function(t){return{extend:"columnVisibility",columns:t,visibility:e.visibility}}).toArray();return i},columnVisibility:{columns:A,text:function(t,e,i){return i._columnText(t,i.columns)},className:"buttons-columnVisibility",action:function(t,e,i,n){var s=e.columns(n.columns),o=s.visible();s.visible(n.visibility!==A?n.visibility:!(o.length?o[0]:!1))},init:function(t,e,i){var A=this;t.on("column-visibility.dt"+i.namespace,function(e,n){n.bDestroying||A.active(t.column(i.columns).visible())}).on("column-reorder.dt"+i.namespace,function(e,n,s){if(1===t.columns(i.columns).count()){"number"==typeof i.columns&&(i.columns=s.mapping[i.columns]);var o=t.column(i.columns);A.text(i._columnText(t,i.columns)),A.active(o.visible())}}),this.active(t.column(i.columns).visible())},destroy:function(t,e,i){t.off("column-visibility.dt"+i.namespace).off("column-reorder.dt"+i.namespace)},_columnText:function(t,e){var i=t.column(e).index();return t.settings()[0].aoColumns[i].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"")}},colvisRestore:{className:"buttons-colvisRestore",text:function(t){return t.i18n("buttons.colvisRestore","Restore visibility")},init:function(t,e,i){i._visOriginal=t.columns().indexes().map(function(e){return t.column(e).visible()}).toArray()},action:function(t,e,i,A){e.columns().every(function(t){var i=e.colReorder&&e.colReorder.transpose?e.colReorder.transpose(t,"toOriginal"):t;this.visible(A._visOriginal[i])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(t,e,i,A){e.columns(A.show).visible(!0,!1),e.columns(A.hide).visible(!1,!1),e.columns.adjust()},show:[],hide:[]}}),n.Buttons});