/*! FixedColumns 3.2.0
 * Â©2010-2014 SpryMedia Ltd - datatables.net/license
 */
/**
 * @summary     FixedColumns
 * @description Freeze columns in place on a scrolling DataTable
 * @version     3.2.0
 * @file        dataTables.fixedColumns.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2010-2014 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */
!function(A){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return A(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),A(e,t,t.document)}:A(jQuery,window,document)}(function(A,t,e,i){"use strict";var n=A.fn.dataTable,r=function(t,e){var n=this;if(!(this instanceof r))return void alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.");e!==i&&e!==!0||(e={});var o=A.fn.dataTable.camelToHungarian;o&&(o(r.defaults,r.defaults,!0),o(r.defaults,e));var s=new A.fn.dataTable.Api(t).settings()[0];if(this.s={dt:s,iTableColumns:s.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[]},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},s._oFixedColumns)throw"FixedColumns already initialised on this table";s._oFixedColumns=this,s._bInitComplete?this._fnConstruct(e):s.oApi._fnCallbackReg(s,"aoInitComplete",function(){n._fnConstruct(e)},"FixedColumns")};return A.extend(r.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(A){delete A._DTTC_iHeight,A.style.height="auto"},fnSetRowHeight:function(A,t){A.style.height=t+"px"},fnGetPosition:function(t){var e,i=this.s.dt.oInstance;if(A(t).parents(".DTFC_Cloned").length){if("tr"===t.nodeName.toLowerCase())return e=A(t).index(),i.fnGetPosition(A("tr",this.s.dt.nTBody)[e]);var n=A(t).index();e=A(t.parentNode).index();var r=i.fnGetPosition(A("tr",this.s.dt.nTBody)[e]);return[r,n,i.oApi._fnVisibleToColumnIndex(this.s.dt,n)]}return i.fnGetPosition(t)},_fnConstruct:function(n){var o=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||this.s.dt.oInstance.fnVersionCheck("1.8.0")!==!0)return void alert("FixedColumns "+r.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");if(""===this.s.dt.oScroll.sX)return void this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");this.s=A.extend(!0,this.s,r.defaults,n);var s=this.s.dt.oClasses;this.dom.grid.dt=A(this.s.dt.nTable).parents("div."+s.sScrollWrapper)[0],this.dom.scroller=A("div."+s.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var a;A(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){a="main"}).on("scroll.DTFC",function(A){!a&&A.originalEvent&&(a="main"),"main"===a&&(o.s.iLeftColumns>0&&(o.dom.grid.left.liner.scrollTop=o.dom.scroller.scrollTop),o.s.iRightColumns>0&&(o.dom.grid.right.liner.scrollTop=o.dom.scroller.scrollTop))});var l="onwheel"in e.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";o.s.iLeftColumns>0&&A(o.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){a="left"}).on("scroll.DTFC",function(A){!a&&A.originalEvent&&(a="left"),"left"===a&&(o.dom.scroller.scrollTop=o.dom.grid.left.liner.scrollTop,o.s.iRightColumns>0&&(o.dom.grid.right.liner.scrollTop=o.dom.grid.left.liner.scrollTop))}).on(l,function(A){var t="wheel"===A.type?-A.originalEvent.deltaX:A.originalEvent.wheelDeltaX;o.dom.scroller.scrollLeft-=t}),o.s.iRightColumns>0&&A(o.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){a="right"}).on("scroll.DTFC",function(A){!a&&A.originalEvent&&(a="right"),"right"===a&&(o.dom.scroller.scrollTop=o.dom.grid.right.liner.scrollTop,o.s.iLeftColumns>0&&(o.dom.grid.left.liner.scrollTop=o.dom.grid.right.liner.scrollTop))}).on(l,function(A){var t="wheel"===A.type?-A.originalEvent.deltaX:A.originalEvent.wheelDeltaX;o.dom.scroller.scrollLeft-=t}),A(t).on("resize.DTFC",function(){o._fnGridLayout.call(o)});var c=!0,h=A(this.s.dt.nTable);h.on("draw.dt.DTFC",function(){o._fnDraw.call(o,c),c=!1}).on("column-sizing.dt.DTFC",function(){o._fnColCalc(),o._fnGridLayout(o)}).on("column-visibility.dt.DTFC",function(A,t,e,n,r){(r===i||r)&&(o._fnColCalc(),o._fnGridLayout(o),o._fnDraw(!0))}).on("destroy.dt.DTFC",function(){h.off("column-sizing.dt.DTFC column-visibility.dt.DTFC destroy.dt.DTFC draw.dt.DTFC"),A(o.dom.scroller).off("mouseover.DTFC touchstart.DTFC scroll.DTFC"),A(t).off("resize.DTFC"),A(o.dom.grid.left.liner).off("mouseover.DTFC touchstart.DTFC scroll.DTFC "+l),A(o.dom.grid.left.wrapper).remove(),A(o.dom.grid.right.liner).off("mouseover.DTFC touchstart.DTFC scroll.DTFC "+l),A(o.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)},_fnColCalc:function(){var t=this,e=0,i=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],A.each(this.s.dt.aoColumns,function(n,r){var o,s=A(r.nTh);if(s.filter(":visible").length){var a=s.outerWidth();0===t.s.aiOuterWidths.length&&(o=A(t.s.dt.nTable).css("border-left-width"),a+="string"==typeof o?1:parseInt(o,10)),t.s.aiOuterWidths.length===t.s.dt.aoColumns.length-1&&(o=A(t.s.dt.nTable).css("border-right-width"),a+="string"==typeof o?1:parseInt(o,10)),t.s.aiOuterWidths.push(a),t.s.aiInnerWidths.push(s.width()),n<t.s.iLeftColumns&&(e+=a),t.s.iTableColumns-t.s.iRightColumns<=n&&(i+=a)}else t.s.aiInnerWidths.push(0),t.s.aiOuterWidths.push(0)}),this.s.iLeftWidth=e,this.s.iRightWidth=i},_fnGridSetup:function(){var t,e=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var i=A('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],n=i.childNodes[0],r=i.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(i,this.dom.grid.dt),i.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=i,this.s.iLeftColumns>0&&(this.dom.grid.left.wrapper=n,this.dom.grid.left.head=n.childNodes[0],this.dom.grid.left.body=n.childNodes[1],this.dom.grid.left.liner=A("div.DTFC_LeftBodyLiner",i)[0],i.appendChild(n)),this.s.iRightColumns>0&&(this.dom.grid.right.wrapper=r,this.dom.grid.right.head=r.childNodes[0],this.dom.grid.right.body=r.childNodes[1],this.dom.grid.right.liner=A("div.DTFC_RightBodyLiner",i)[0],t=A("div.DTFC_RightHeadBlocker",i)[0],t.style.width=e.bar+"px",t.style.right=-e.bar+"px",this.dom.grid.right.headBlock=t,t=A("div.DTFC_RightFootBlocker",i)[0],t.style.width=e.bar+"px",t.style.right=-e.bar+"px",this.dom.grid.right.footBlock=t,i.appendChild(r)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,this.s.iLeftColumns>0&&(this.dom.grid.left.foot=n.childNodes[2]),this.s.iRightColumns>0&&(this.dom.grid.right.foot=r.childNodes[2]))},_fnGridLayout:function(){var t,e=this.dom.grid,i=A(e.wrapper).width(),n=A(this.s.dt.nTable.parentNode).outerHeight(),r=A(this.s.dt.nTable.parentNode.parentNode).outerHeight(),o=this._fnDTOverflow(),s=this.s.iLeftWidth,a=this.s.iRightWidth,l=function(A,t){o.bar?A.style.width=t+o.bar+"px":(A.style.width=t+20+"px",A.style.paddingRight="20px",A.style.boxSizing="border-box")};o.x&&(n-=o.bar),e.wrapper.style.height=r+"px",this.s.iLeftColumns>0&&(e.left.wrapper.style.width=s+"px",e.left.wrapper.style.height="1px",e.left.body.style.height=n+"px",e.left.foot&&(e.left.foot.style.top=(o.x?o.bar:0)+"px"),l(e.left.liner,s),e.left.liner.style.height=n+"px"),this.s.iRightColumns>0&&(t=i-a,o.y&&(t-=o.bar),e.right.wrapper.style.width=a+"px",e.right.wrapper.style.left=t+"px",e.right.wrapper.style.height="1px",e.right.body.style.height=n+"px",e.right.foot&&(e.right.foot.style.top=(o.x?o.bar:0)+"px"),l(e.right.liner,a),e.right.liner.style.height=n+"px",e.right.headBlock.style.display=o.y?"block":"none",e.right.footBlock.style.display=o.y?"block":"none")},_fnDTOverflow:function(){var A=this.s.dt.nTable,t=A.parentNode,e={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return A.offsetWidth>t.clientWidth&&(e.x=!0),A.offsetHeight>t.clientHeight&&(e.y=!0),e},_fnDraw:function(t){this._fnGridLayout(),this._fnCloneLeft(t),this._fnCloneRight(t),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),A(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(A){if(!(this.s.iRightColumns<=0)){var t,e=[];for(t=this.s.iTableColumns-this.s.iRightColumns;t<this.s.iTableColumns;t++)this.s.dt.aoColumns[t].bVisible&&e.push(t);this._fnClone(this.dom.clone.right,this.dom.grid.right,e,A)}},_fnCloneLeft:function(A){if(!(this.s.iLeftColumns<=0)){var t,e=[];for(t=0;t<this.s.iLeftColumns;t++)this.s.dt.aoColumns[t].bVisible&&e.push(t);this._fnClone(this.dom.clone.left,this.dom.grid.left,e,A)}},_fnCopyLayout:function(t,e,i){for(var n=[],r=[],o=[],s=0,a=t.length;a>s;s++){var l=[];l.nTr=A(t[s].nTr).clone(i,!1)[0];for(var c=0,h=this.s.iTableColumns;h>c;c++)if(-1!==A.inArray(c,e)){var u=A.inArray(t[s][c].cell,o);if(-1===u){var d=A(t[s][c].cell).clone(i,!1)[0];r.push(d),o.push(t[s][c].cell),l.push({cell:d,unique:t[s][c].unique})}else l.push({cell:r[u],unique:t[s][c].unique})}n.push(l)}return n},_fnClone:function(t,e,n,r){var o,s,a,l,c,h,u,d,f,g,p=this,B=this.s.dt;if(r){for(A(t.header).remove(),t.header=A(this.dom.header).clone(!0,!1)[0],t.header.className+=" DTFC_Cloned",t.header.style.width="100%",e.head.appendChild(t.header),d=this._fnCopyLayout(B.aoHeader,n,!0),f=A(">thead",t.header),f.empty(),o=0,s=d.length;s>o;o++)f[0].appendChild(d[o].nTr);B.oApi._fnDrawHead(B,d,!0)}else for(d=this._fnCopyLayout(B.aoHeader,n,!1),g=[],B.oApi._fnDetectHeader(g,A(">thead",t.header)[0]),o=0,s=d.length;s>o;o++)for(a=0,l=d[o].length;l>a;a++)g[o][a].cell.className=d[o][a].cell.className,A("span.DataTables_sort_icon",g[o][a].cell).each(function(){this.className=A("span.DataTables_sort_icon",d[o][a].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,t.header),"auto"==this.s.sHeightMatch&&A(">tbody>tr",p.dom.body).css("height","auto"),null!==t.body&&(A(t.body).remove(),t.body=null),t.body=A(this.dom.body).clone(!0)[0],t.body.className+=" DTFC_Cloned",t.body.style.paddingBottom=B.oScroll.iBarWidth+"px",t.body.style.marginBottom=2*B.oScroll.iBarWidth+"px",null!==t.body.getAttribute("id")&&t.body.removeAttribute("id"),A(">thead>tr",t.body).empty(),A(">tfoot",t.body).remove();var w=A("tbody",t.body)[0];if(A(w).empty(),B.aiDisplay.length>0){var m=A(">thead>tr",t.body)[0];for(u=0;u<n.length;u++){c=n[u],h=A(B.aoColumns[c].nTh).clone(!0)[0],h.innerHTML="";var v=h.style;v.paddingTop="0",v.paddingBottom="0",v.borderTopWidth="0",v.borderBottomWidth="0",v.height=0,v.width=p.s.aiInnerWidths[c]+"px",m.appendChild(h)}A(">tbody>tr",p.dom.body).each(function(t){var e=this.cloneNode(!1);e.removeAttribute("id");var i=p.s.dt.oFeatures.bServerSide===!1?p.s.dt.aiDisplay[p.s.dt._iDisplayStart+t]:t,r=p.s.dt.aoData[i].anCells||A(this).children("td, th");for(u=0;u<n.length;u++)c=n[u],r.length>0&&(h=A(r[c]).clone(!0,!0)[0],e.appendChild(h));w.appendChild(e)})}else A(">tbody>tr",p.dom.body).each(function(){h=this.cloneNode(!0),h.className+=" DTFC_NoData",A("td",h).html(""),w.appendChild(h)});if(t.body.style.width="100%",t.body.style.margin="0",t.body.style.padding="0",B.oScroller!==i){var E=B.oScroller.dom.force;e.forcer?e.forcer.style.height=E.style.height:(e.forcer=E.cloneNode(!0),e.liner.appendChild(e.forcer))}if(e.liner.appendChild(t.body),this._fnEqualiseHeights("tbody",p.dom.body,t.body),null!==B.nTFoot){if(r){null!==t.footer&&t.footer.parentNode.removeChild(t.footer),t.footer=A(this.dom.footer).clone(!0,!0)[0],t.footer.className+=" DTFC_Cloned",t.footer.style.width="100%",e.foot.appendChild(t.footer),d=this._fnCopyLayout(B.aoFooter,n,!0);var I=A(">tfoot",t.footer);for(I.empty(),o=0,s=d.length;s>o;o++)I[0].appendChild(d[o].nTr);B.oApi._fnDrawHead(B,d,!0)}else{d=this._fnCopyLayout(B.aoFooter,n,!1);var Q=[];for(B.oApi._fnDetectHeader(Q,A(">tfoot",t.footer)[0]),o=0,s=d.length;s>o;o++)for(a=0,l=d[o].length;l>a;a++)Q[o][a].cell.className=d[o][a].cell.className}this._fnEqualiseHeights("tfoot",this.dom.footer,t.footer)}var b=B.oApi._fnGetUniqueThs(B,A(">thead",t.header)[0]);A(b).each(function(A){c=n[A],this.style.width=p.s.aiInnerWidths[c]+"px"}),null!==p.s.dt.nTFoot&&(b=B.oApi._fnGetUniqueThs(B,A(">tfoot",t.footer)[0]),A(b).each(function(A){c=n[A],this.style.width=p.s.aiInnerWidths[c]+"px"}))},_fnGetTrNodes:function(A){for(var t=[],e=0,i=A.childNodes.length;i>e;e++)"TR"==A.childNodes[e].nodeName.toUpperCase()&&t.push(A.childNodes[e]);return t},_fnEqualiseHeights:function(t,e,i){if("none"!=this.s.sHeightMatch||"thead"===t||"tfoot"===t){var n,r,o,s,a,l=e.getElementsByTagName(t)[0],c=i.getElementsByTagName(t)[0],h=A(">"+t+">tr:eq(0)",e).children(":first"),u=(h.outerHeight()-h.height(),this._fnGetTrNodes(l)),d=this._fnGetTrNodes(c),f=[];for(n=0,r=d.length;r>n;n++)s=u[n].offsetHeight,a=d[n].offsetHeight,o=a>s?a:s,"semiauto"==this.s.sHeightMatch&&(u[n]._DTTC_iHeight=o),f.push(o);for(n=0,r=d.length;r>n;n++)d[n].style.height=f[n]+"px",u[n].style.height=f[n]+"px"}}}),r.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},r.version="3.2.0",n.Api.register("fixedColumns()",function(){return this}),n.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(A){A._oFixedColumns&&A._oFixedColumns.fnUpdate()})}),n.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(A){A._oFixedColumns&&A._oFixedColumns.fnRedrawLayout()})}),n.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(A,t){A._oFixedColumns&&A._oFixedColumns.fnRecalculateHeight(this.row(t).node())})}),n.Api.register("fixedColumns().rowIndex()",function(t){return t=A(t),t.parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[t.index()]:this.row(t).index()}),n.Api.register("fixedColumns().cellIndex()",function(t){if(t=A(t),t.parents(".DTFC_Cloned").length){var e,i=t.parent().index(),n=this.rows({page:"current"}).indexes()[i];if(t.parents(".DTFC_LeftWrapper").length)e=t.index();else{var r=this.columns().flatten().length;e=r-this.context[0]._oFixedColumns.s.iRightColumns+t.index()}return{row:n,column:this.column.index("toData",e),columnVisible:e}}return this.cell(t).index()}),A(e).on("init.dt.fixedColumns",function(t,e){if("dt"===t.namespace){var i=e.oInit.fixedColumns,o=n.defaults.fixedColumns;if(i||o){var s=A.extend({},i,o);i!==!1&&new r(e,s)}}}),A.fn.dataTable.FixedColumns=r,A.fn.DataTable.FixedColumns=r,r});