/*! FixedHeader 3.1.0
 * Â©2009-2015 SpryMedia Ltd - datatables.net/license
 */
/**
 * @summary     FixedHeader
 * @description Fix a table's header or footer, so it is always visible while
 *              scrolling
 * @version     3.1.0
 * @file        dataTables.fixedHeader.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2009-2015 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */
!function(A){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return A(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),A(e,t,t.document)}:A(jQuery,window,document)}(function(A,t,e,i){"use strict";var n=A.fn.dataTable,r=0,o=function(e,i){if(!(this instanceof o))throw"FixedHeader must be initialised with the 'new' keyword.";i===!0&&(i={}),e=new n.Api(e),this.c=A.extend(!0,{},o.defaults,i),this.s={dt:e,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:A(t).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:e.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+r++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:A(e.table().header()),tbody:A(e.table().body()),tfoot:A(e.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var s=e.settings()[0];if(s._fixedHeader)throw"FixedHeader already initialised on table "+s.nTable.id;s._fixedHeader=this,this._constructor()};return A.extend(o.prototype,{enable:function(A){this.s.enable=A,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(A){return A!==i&&(this.c.headerOffset=A,this.update()),this.c.headerOffset},footerOffset:function(A){return A!==i&&(this.c.footerOffset=A,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var e=this,i=this.s.dt;A(t).on("scroll"+this.s.namespace,function(){e._scroll()}).on("resize"+this.s.namespace,function(){e.s.position.windowHeight=A(t).height(),e.update()}),i.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc",function(){e.update()}),i.on("destroy.dtfc",function(){i.off(".dtfc"),A(t).off(e.s.namespace)}),this._positions(),this._scroll()},_clone:function(t,e){var i=this.s.dt,n=this.dom[t],r="header"===t?this.dom.thead:this.dom.tfoot;!e&&n.floating?n.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(n.floating&&(n.placeholder.remove(),n.floating.children().detach(),n.floating.remove()),n.floating=A(i.table().node().cloneNode(!1)).removeAttr("id").append(r).appendTo("body"),n.placeholder=r.clone(!1),n.host.append(n.placeholder),this._matchWidths(n.placeholder,n.floating))},_matchWidths:function(t,e){var i=function(i){var n=A(i,t).map(function(){return A(this).width()}).toArray();A(i,e).each(function(t){A(this).width(n[t]).css("min-width",n[t])})};i("th"),i("td")},_unsize:function(t){var e=this.dom[t].floating;e&&("footer"===t||"header"===t&&!this.s.autoWidth)&&A("th, td",e).css("width","")},_horizontal:function(A,t){var e=this.dom[A],i=this.s.position,n=this.s.scrollLeft;e.floating&&n[A]!==t&&(e.floating.css("left",i.left-t),n[A]=t)},_modeChange:function(A,t,e){var i=(this.s.dt,this.dom[t]),n=this.s.position;"in-place"===A?(i.placeholder&&(i.placeholder.remove(),i.placeholder=null),this._unsize(t),i.host.append("header"===t?this.dom.thead:this.dom.tfoot),i.floating&&(i.floating.remove(),i.floating=null)):"in"===A?(this._clone(t,e),i.floating.addClass("fixedHeader-floating").css("header"===t?"top":"bottom",this.c[t+"Offset"]).css("left",n.left+"px").css("width",n.width+"px"),"footer"===t&&i.floating.css("top","")):"below"===A?(this._clone(t,e),i.floating.addClass("fixedHeader-locked").css("top",n.tfootTop-n.theadHeight).css("left",n.left+"px").css("width",n.width+"px")):"above"===A&&(this._clone(t,e),i.floating.addClass("fixedHeader-locked").css("top",n.tbodyTop).css("left",n.left+"px").css("width",n.width+"px")),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[t+"Mode"]=A},_positions:function(){var t=this.s.dt,e=t.table(),i=this.s.position,n=this.dom,r=A(e.node()),o=r.children("thead"),s=r.children("tfoot"),a=n.tbody;i.visible=r.is(":visible"),i.width=r.outerWidth(),i.left=r.offset().left,i.theadTop=o.offset().top,i.tbodyTop=a.offset().top,i.theadHeight=i.tbodyTop-i.theadTop,s.length?(i.tfootTop=s.offset().top,i.tfootBottom=i.tfootTop+s.outerHeight(),i.tfootHeight=i.tfootBottom-i.tfootTop):(i.tfootTop=i.tbodyTop+a.outerHeight(),i.tfootBottom=i.tfootTop,i.tfootHeight=i.tfootTop)},_scroll:function(t){var i,n,r=A(e).scrollTop(),o=A(e).scrollLeft(),s=this.s.position;this.s.enable&&(this.c.header&&(i=!s.visible||r<=s.theadTop-this.c.headerOffset?"in-place":r<=s.tfootTop-s.theadHeight-this.c.headerOffset?"in":"below",(t||i!==this.s.headerMode)&&this._modeChange(i,"header",t),this._horizontal("header",o)),this.c.footer&&this.dom.tfoot.length&&(n=!s.visible||r+s.windowHeight>=s.tfootBottom+this.c.footerOffset?"in-place":s.windowHeight+r>s.tbodyTop+s.tfootHeight+this.c.footerOffset?"in":"above",(t||n!==this.s.footerMode)&&this._modeChange(n,"footer",t),this._horizontal("footer",o)))}}),o.version="3.1.0",o.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},A.fn.dataTable.FixedHeader=o,A.fn.DataTable.FixedHeader=o,A(e).on("init.dt.dtb",function(A,t){if("dt"===A.namespace){var e=t.oInit.fixedHeader||n.defaults.fixedHeader;e&&!t._fixedHeader&&new o(t,e)}}),n.Api.register("fixedHeader()",function(){}),n.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(A){var t=A._fixedHeader;t&&t.update()})}),n.Api.register("fixedHeader.enable()",function(A){return this.iterator("table",function(t){var e=t._fixedHeader;e&&e.enable(A!==i?A:!0)})}),n.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(A){var t=A._fixedHeader;t&&t.enable(!1)})}),A.each(["header","footer"],function(A,t){n.Api.register("fixedHeader."+t+"Offset()",function(A){var e=this.context;return A===i?e.length&&e[0]._fixedHeader?e[0]._fixedHeader[t+"Offset"]():i:this.iterator("table",function(e){var i=e._fixedHeader;i&&i[t+"Offset"](A)})})}),o});