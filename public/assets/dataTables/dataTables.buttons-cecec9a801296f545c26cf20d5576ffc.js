/*! Buttons for DataTables 1.1.0
 * Â©2015 SpryMedia Ltd - datatables.net/license
 */
!function(A){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return A(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),A(e,t,t.document)}:A(jQuery,window,document)}(function(A,t,e,i){"use strict";var n=A.fn.dataTable,r=0,s=0,o=n.ext.buttons,a=function(t,e){e===!0&&(e={}),A.isArray(e)&&(e={buttons:e}),this.c=A.extend(!0,{},a.defaults,e),e.buttons&&(this.c.buttons=e.buttons),this.s={dt:new n.Api(t),buttons:[],subButtons:[],listenKeys:"",namespace:"dtb"+r++},this.dom={container:A("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};A.extend(a.prototype,{action:function(A,t){var e=this._indexToButton(A).conf;return t===i?e.action:(e.action=t,this)},active:function(A,t){var e=this._indexToButton(A);return e.node.toggleClass(this.c.dom.button.active,t===i?!0:t),this},add:function(A,t){if("string"==typeof A&&-1!==A.indexOf("-")){var e=A.split("-");this.c.buttons[1*e[0]].buttons.splice(1*e[1],0,t)}else this.c.buttons.splice(1*A,0,t);return this.dom.container.empty(),this._buildButtons(this.c.buttons),this},container:function(){return this.dom.container},disable:function(A){var t=this._indexToButton(A);return t.node.addClass(this.c.dom.button.disabled),this},destroy:function(){A("body").off("keyup."+this.s.namespace);var t,e,i,n,r=this.s.buttons,s=this.s.subButtons;for(t=0,e=r.length;e>t;t++)for(this.removePrep(t),i=0,n=s[t].length;n>i;i++)this.removePrep(t+"-"+i);this.removeCommit(),this.dom.container.remove();var o=this.s.dt.settings()[0];for(t=0,e=o.length;e>t;t++)if(o.inst===this){o.splice(t,1);break}return this},enable:function(A,t){if(t===!1)return this.disable(A);var e=this._indexToButton(A);return e.node.removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(A){var t=this._indexToButton(A);return t.node},removeCommit:function(){var A,t,e,i=this.s.buttons,n=this.s.subButtons;for(A=i.length-1;A>=0;A--)null===i[A]&&(i.splice(A,1),n.splice(A,1),this.c.buttons.splice(A,1));for(A=0,t=n.length;t>A;A++)for(e=n[A].length-1;e>=0;e--)null===n[A][e]&&(n[A].splice(e,1),this.c.buttons[A].buttons.splice(e,1));return this},removePrep:function(A){var t,e=this.s.dt;if("number"==typeof A||-1===A.indexOf("-"))t=this.s.buttons[1*A],t.conf.destroy&&t.conf.destroy.call(e.button(A),e,t,t.conf),t.node.remove(),this._removeKey(t.conf),this.s.buttons[1*A]=null;else{var i=A.split("-");t=this.s.subButtons[1*i[0]][1*i[1]],t.conf.destroy&&t.conf.destroy.call(e.button(A),e,t,t.conf),t.node.remove(),this._removeKey(t.conf),this.s.subButtons[1*i[0]][1*i[1]]=null}return this},text:function(A,t){var e=this._indexToButton(A),n=this.c.dom.collection.buttonLiner,r="string"==typeof A&&-1!==A.indexOf("-")&&n&&n.tag?n.tag:this.c.dom.buttonLiner.tag,s=this.s.dt,o=function(A){return"function"==typeof A?A(s,e.node,e.conf):A};return t===i?o(e.conf.text):(e.conf.text=t,r?e.node.children(r).html(o(t)):e.node.html(o(t)),this)},toIndex:function(A){var t,e,i,n,r=this.s.buttons,s=this.s.subButtons;for(t=0,e=r.length;e>t;t++)if(r[t].node[0]===A)return t+"";for(t=0,e=s.length;e>t;t++)for(i=0,n=s[t].length;n>i;i++)if(s[t][i].node[0]===A)return t+"-"+i},_constructor:function(){var t=this,i=this.s.dt,n=i.settings()[0];n._buttons||(n._buttons=[]),n._buttons.push({inst:this,name:this.c.name}),this._buildButtons(this.c.buttons),i.on("destroy",function(){t.destroy()}),A("body").on("keyup."+this.s.namespace,function(A){if(!e.activeElement||e.activeElement===e.body){var i=String.fromCharCode(A.keyCode).toLowerCase();-1!==t.s.listenKeys.toLowerCase().indexOf(i)&&t._keypress(i,A)}})},_addKey:function(t){t.key&&(this.s.listenKeys+=A.isPlainObject(t.key)?t.key.key:t.key)},_buildButtons:function(t,e,n){var r=this.s.dt;e||(e=this.dom.container,this.s.buttons=[],this.s.subButtons=[]);for(var s=0,o=t.length;o>s;s++){var a=this._resolveExtends(t[s]);if(a)if(A.isArray(a))this._buildButtons(a,e,n);else{var l=this._buildButton(a,n!==i);if(l){var c=l.node;if(e.append(l.inserter),n===i?(this.s.buttons.push({node:c,conf:a,inserter:l.inserter}),this.s.subButtons.push([])):this.s.subButtons[n].push({node:c,conf:a,inserter:l.inserter}),a.buttons){var h=this.c.dom.collection;a._collection=A("<"+h.tag+"/>").addClass(h.className),this._buildButtons(a.buttons,a._collection,s)}a.init&&a.init.call(r.button(c),r,c,a)}}}},_buildButton:function(t,e){var i=this.c.dom.button,n=this.c.dom.buttonLiner,r=this.c.dom.collection,o=this.s.dt,a=function(A){return"function"==typeof A?A(o,l,t):A};if(e&&r.button&&(i=r.button),e&&r.buttonLiner&&(n=r.buttonLiner),t.available&&!t.available(o,t))return!1;var l=A("<"+i.tag+"/>").addClass(i.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(A){A.preventDefault(),!l.hasClass(i.disabled)&&t.action&&t.action.call(o.button(l),A,o,l,t),l.blur()}).on("keyup.dtb",function(A){13===A.keyCode&&!l.hasClass(i.disabled)&&t.action&&t.action.call(o.button(l),A,o,l,t)});n.tag?l.append(A("<"+n.tag+"/>").html(a(t.text)).addClass(n.className)):l.html(a(t.text)),t.enabled===!1&&l.addClass(i.disabled),t.className&&l.addClass(t.className),t.titleAttr&&l.attr("title",t.titleAttr),t.namespace||(t.namespace=".dt-button-"+s++);var c,h=this.c.dom.buttonContainer;return c=h?A("<"+h.tag+"/>").addClass(h.className).append(l):l,this._addKey(t),{node:l,inserter:c}},_indexToButton:function(A){if("number"==typeof A||-1===A.indexOf("-"))return this.s.buttons[1*A];var t=A.split("-");return this.s.subButtons[1*t[0]][1*t[1]]},_keypress:function(t,e){var i,n,r,s,o=this.s.buttons,a=this.s.subButtons,l=function(i,n){if(i.key)if(i.key===t)n.click();else if(A.isPlainObject(i.key)){if(i.key.key!==t)return;if(i.key.shiftKey&&!e.shiftKey)return;if(i.key.altKey&&!e.altKey)return;if(i.key.ctrlKey&&!e.ctrlKey)return;if(i.key.metaKey&&!e.metaKey)return;n.click()}};for(i=0,n=o.length;n>i;i++)l(o[i].conf,o[i].node);for(i=0,n=a.length;n>i;i++)for(r=0,s=a[i].length;s>r;r++)l(a[i][r].conf,a[i][r].node)},_removeKey:function(t){if(t.key){var e=A.isPlainObject(t.key)?t.key.key:t.key,i=this.s.listenKeys.split(""),n=A.inArray(e,i);i.splice(n,1),this.s.listenKeys=i.join("")}},_resolveExtends:function(t){var e,n,r=this.s.dt,s=function(e){for(var n=0;!A.isPlainObject(e)&&!A.isArray(e);){if(e===i)return;if("function"==typeof e){if(e=e(r,t),!e)return!1}else if("string"==typeof e){if(!o[e])throw"Unknown button type: "+e;e=o[e]}if(n++,n>30)throw"Buttons: Too many iterations"}return A.isArray(e)?e:A.extend({},e)};for(t=s(t);t&&t.extend;){if(!o[t.extend])throw"Cannot extend unknown button type: "+t.extend;var a=s(o[t.extend]);if(A.isArray(a))return a;if(!a)return!1;var l=a.className;t=A.extend({},a,t),l&&t.className!==l&&(t.className=l+" "+t.className);var c=t.postfixButtons;if(c){for(t.buttons||(t.buttons=[]),e=0,n=c.length;n>e;e++)t.buttons.push(c[e]);t.postfixButtons=null}var h=t.prefixButtons;if(h){for(t.buttons||(t.buttons=[]),e=0,n=h.length;n>e;e++)t.buttons.splice(e,0,h[e]);t.prefixButtons=null}t.extend=a.extend}return t}}),a.background=function(t,e,n){n===i&&(n=400),t?A("<div/>").addClass(e).css("display","none").appendTo("body").fadeIn(n):A("body > div."+e).fadeOut(n,function(){A(this).remove()})},a.instanceSelector=function(t,e){if(!t)return A.map(e,function(A){return A.inst});var i=[],n=A.map(e,function(A){return A.name}),r=function(t){if(A.isArray(t))for(var s=0,o=t.length;o>s;s++)r(t[s]);else if("string"==typeof t)if(-1!==t.indexOf(","))r(t.split(","));else{var a=A.inArray(A.trim(t),n);-1!==a&&i.push(e[a].inst)}else"number"==typeof t&&i.push(e[t].inst)};return r(t),i},a.buttonSelector=function(t,e){for(var n=[],r=function(t,e){var s,o,a=[];A.each(e.s.buttons,function(A,t){null!==t&&a.push({node:t.node[0],name:t.name})}),A.each(e.s.subButtons,function(t,e){A.each(e,function(A,t){null!==t&&a.push({node:t.node[0],name:t.name})})});var l=A.map(a,function(A){return A.node});if(A.isArray(t)||t instanceof A)for(s=0,o=t.length;o>s;s++)r(t[s],e);else if(null===t||t===i||"*"===t)for(s=0,o=a.length;o>s;s++)n.push({inst:e,idx:e.toIndex(a[s].node)});else if("number"==typeof t)n.push({inst:e,idx:t});else if("string"==typeof t)if(-1!==t.indexOf(",")){var c=t.split(",");for(s=0,o=c.length;o>s;s++)r(A.trim(c[s]),e)}else if(t.match(/^\d+(\-\d+)?$/))n.push({inst:e,idx:t});else if(-1!==t.indexOf(":name")){var h=t.replace(":name","");for(s=0,o=a.length;o>s;s++)a[s].name===h&&n.push({inst:e,idx:e.toIndex(a[s].node)})}else A(l).filter(t).each(function(){n.push({inst:e,idx:e.toIndex(this)})});else if("object"==typeof t&&t.nodeName){var u=A.inArray(t,l);-1!==u&&n.push({inst:e,idx:e.toIndex(l[u])})}},s=0,o=t.length;o>s;s++){var a=t[s];r(e,a)}return n},a.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},a.version="1.1.0",A.extend(o,{collection:{text:function(A){return A.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(i,n,r,s){var o=r,l=o.offset(),c=A(n.table().container()),h=!1;A("div.dt-button-background").length&&(h=A("div.dt-button-collection").offset(),A(e).trigger("click.dtb-collection")),s._collection.addClass(s.collectionLayout).css("display","none").appendTo("body").fadeIn(s.fade);var u=s._collection.css("position");if(h&&"absolute"===u)s._collection.css({top:h.top+5,left:h.left+5});else if("absolute"===u){s._collection.css({top:l.top+o.outerHeight(),left:l.left});var d=l.left+s._collection.outerWidth(),f=c.offset().left+c.width();d>f&&s._collection.css("left",l.left-(d-f))}else{var g=s._collection.height()/2;g>A(t).height()/2&&(g=A(t).height()/2),s._collection.css("marginTop",-1*g)}s.background&&a.background(!0,s.backgroundClassName,s.fade),setTimeout(function(){A("div.dt-button-background").on("click.dtb-collection",function(){}),A("body").on("click.dtb-collection",function(t){A(t.target).parents().andSelf().filter(s._collection).length||(s._collection.fadeOut(s.fade,function(){s._collection.detach()}),A("div.dt-button-background").off("click.dtb-collection"),a.background(!1,s.backgroundClassName,s.fade),A("body").off("click.dtb-collection"))})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",fade:400},copy:function(A,t){return o.copyHtml5?"copyHtml5":o.copyFlash&&o.copyFlash.available(A,t)?"copyFlash":void 0},csv:function(A,t){return o.csvHtml5&&o.csvHtml5.available(A,t)?"csvHtml5":o.csvFlash&&o.csvFlash.available(A,t)?"csvFlash":void 0},excel:function(A,t){return o.excelHtml5&&o.excelHtml5.available(A,t)?"excelHtml5":o.excelFlash&&o.excelFlash.available(A,t)?"excelFlash":void 0},pdf:function(A,t){return o.pdfHtml5&&o.pdfHtml5.available(A,t)?"pdfHtml5":o.pdfFlash&&o.pdfFlash.available(A,t)?"pdfFlash":void 0},pageLength:function(t){var e=t.settings()[0].aLengthMenu,i=A.isArray(e[0])?e[0]:e,n=A.isArray(e[0])?e[1]:e,r=function(A){return A.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},A.page.len())};return{extend:"collection",text:r,className:"buttons-page-length",buttons:A.map(i,function(A,t){return{text:n[t],action:function(t,e){e.page.len(A).draw()},init:function(t,e,i){var n=this,r=function(){n.active(t.page.len()===A)};t.on("length.dt"+i.namespace,r),r()},destroy:function(A,t,e){A.off("length.dt"+e.namespace)}}}),init:function(A,t,e){var i=this;A.on("length.dt"+e.namespace,function(){i.text(r(A))})},destroy:function(A,t,e){A.off("length.dt"+e.namespace)}}}}),n.Api.register("buttons()",function(A,t){return t===i&&(t=A,A=i),this.iterator(!0,"table",function(e){return e._buttons?a.buttonSelector(a.instanceSelector(A,e._buttons),t):void 0},!0)}),n.Api.register("button()",function(A,t){var e=this.buttons(A,t);return e.length>1&&e.splice(1,e.length),e}),n.Api.register(["buttons().active()","button().active()"],function(A){return this.each(function(t){t.inst.active(t.idx,A)})}),n.Api.registerPlural("buttons().action()","button().action()",function(A){return A===i?this.map(function(A){return A.inst.action(A.idx)}):this.each(function(t){t.inst.action(t.idx,A)})}),n.Api.register(["buttons().enable()","button().enable()"],function(A){return this.each(function(t){t.inst.enable(t.idx,A)})}),n.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(A){A.inst.disable(A.idx)})}),n.Api.registerPlural("buttons().nodes()","button().node()",function(){var t=A();return A(this.each(function(A){t=t.add(A.inst.node(A.idx))})),t}),n.Api.registerPlural("buttons().text()","button().text()",function(A){return A===i?this.map(function(A){return A.inst.text(A.idx)}):this.each(function(t){t.inst.text(t.idx,A)})}),n.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(A){A.inst.node(A.idx).trigger("click")})}),n.Api.registerPlural("buttons().containers()","buttons().container()",function(){var t=A();return A(this.each(function(A){t=t.add(A.inst.container())})),t}),n.Api.register("button().add()",function(A,t){return 1===this.length&&this[0].inst.add(A,t),this.button(A)}),n.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(A){A.destroy()}),this}),n.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(A){A.inst.removePrep(A.idx)}),this.pluck("inst").unique().each(function(A){A.removeCommit()}),this});var l;n.Api.register("buttons.info()",function(t,e,n){var r=this;return t===!1?(A("#datatables_buttons_info").fadeOut(function(){A(this).remove()}),clearTimeout(l),l=null,this):(l&&clearTimeout(l),A("#datatables_buttons_info").length&&A("#datatables_buttons_info").remove(),t=t?"<h2>"+t+"</h2>":"",A('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t).append(A("<div/>")["string"==typeof e?"html":"append"](e)).css("display","none").appendTo("body").fadeIn(),n!==i&&0!==n&&(l=setTimeout(function(){r.buttons.info(!1)},n)),this)}),n.Api.register("buttons.exportData()",function(A){return this.context.length?h(new n.Api(this.context[0]),A):void 0});var c=A("<textarea/>")[0],h=function(t,e){for(var i=A.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(A){return n(A)},footer:function(A){return n(A)},body:function(A){return n(A)}}},e),n=function(A){return"string"!=typeof A?A:(i.stripHtml&&(A=A.replace(/<.*?>/g,"")),i.trim&&(A=A.replace(/^\s+|\s+$/g,"")),i.stripNewlines&&(A=A.replace(/\n/g," ")),i.decodeEntities&&(c.innerHTML=A,A=c.value),A)},r=t.columns(i.columns).indexes().map(function(A){return i.format.header(t.column(A).header().innerHTML,A)}).toArray(),s=t.table().footer()?t.columns(i.columns).indexes().map(function(A){var e=t.column(A).footer();return i.format.footer(e?e.innerHTML:"",A)}).toArray():null,o=t.rows(i.rows,i.modifier).indexes().toArray(),a=t.cells(o,i.columns).render(i.orthogonal).toArray(),l=r.length,h=l>0?a.length/l:0,u=new Array(h),d=0,f=0,g=h;g>f;f++){for(var p=new Array(l),B=0;l>B;B++)p[B]=i.format.body(a[d],B,f),d++;u[f]=p}return{header:r,footer:s,body:u}};return A.fn.dataTable.Buttons=a,A.fn.DataTable.Buttons=a,A(e).on("init.dt plugin-init.dt",function(A,t){if("dt"===A.namespace){var e=t.oInit.buttons||n.defaults.buttons;e&&!t._buttons&&new a(t,e).container()}}),n.ext.feature.push({fnInit:function(A){var t=new n.Api(A),e=t.init().buttons||n.defaults.buttons;return new a(t,e).container()},cFeature:"B"}),a});