/*! Responsive 2.0.0
 * 2014-2015 SpryMedia Ltd - datatables.net/license
 */
/**
 * @summary     Responsive
 * @description Responsive tables plug-in for DataTables
 * @version     2.0.0
 * @file        dataTables.responsive.js
 * @author      SpryMedia Ltd (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 * @copyright   Copyright 2014-2015 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */
!function(A){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return A(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),A(e,t,t.document)}:A(jQuery,window,document)}(function(A,t,e,i){"use strict";var n=A.fn.dataTable,r=function(t,e){if(!n.versionCheck||!n.versionCheck("1.10.3"))throw"DataTables Responsive requires DataTables 1.10.3 or newer";this.s={dt:new n.Api(t),columns:[],current:[]},this.s.dt.settings()[0].responsive||(e&&"string"==typeof e.details&&(e.details={type:e.details}),this.c=A.extend(!0,{},r.defaults,n.defaults.responsive,e),t.responsive=this,this._constructor())};A.extend(r.prototype,{_constructor:function(){var e=this,i=this.s.dt,r=i.settings()[0];i.settings()[0]._responsive=this,A(t).on("resize.dtr orientationchange.dtr",n.util.throttle(function(){e._resize()})),r.oApi._fnCallbackReg(r,"aoRowCreatedCallback",function(t){-1!==A.inArray(!1,e.s.current)&&A("td, th",t).each(function(t){var n=i.column.index("toData",t);e.s.current[n]===!1&&A(this).css("display","none")})}),i.on("destroy.dtr",function(){i.off(".dtr"),A(i.table().body()).off(".dtr"),A(t).off("resize.dtr orientationchange.dtr"),A.each(e.s.current,function(A,t){t===!1&&e._setColumnVis(A,!0)})}),this.c.breakpoints.sort(function(A,t){return A.width<t.width?1:A.width>t.width?-1:0}),this._classLogic(),this._resizeAuto();var o=this.c.details;o.type!==!1&&(e._detailsInit(),i.on("column-visibility.dtr",function(){e._classLogic(),e._resizeAuto(),e._resize()}),i.on("draw.dtr",function(){e._redrawChildren()}),A(i.table().node()).addClass("dtr-"+o.type)),i.on("column-reorder.dtr",function(A,t,i){i.drop&&(e._classLogic(),e._resizeAuto(),e._resize())}),this._resize()},_columnsVisiblity:function(t){var e,i,n=this.s.dt,r=this.s.columns,o=r.map(function(A,t){return{columnIdx:t,priority:A.priority}}).sort(function(A,t){return A.priority!==t.priority?A.priority-t.priority:A.columnIdx-t.columnIdx}),s=A.map(r,function(e){return e.auto&&null===e.minWidth?!1:e.auto===!0?"-":-1!==A.inArray(t,e.includeIn)}),a=0;for(e=0,i=s.length;i>e;e++)s[e]===!0&&(a+=r[e].minWidth);var l=n.settings()[0].oScroll,c=l.sY||l.sX?l.iBarWidth:0,h=n.table().container().offsetWidth-c,u=h-a;for(e=0,i=s.length;i>e;e++)r[e].control&&(u-=r[e].minWidth);var d=!1;for(e=0,i=o.length;i>e;e++){var f=o[e].columnIdx;"-"===s[f]&&!r[f].control&&r[f].minWidth&&(d||u-r[f].minWidth<0?(d=!0,s[f]=!1):s[f]=!0,u-=r[f].minWidth)}var g=!1;for(e=0,i=r.length;i>e;e++)if(!r[e].control&&!r[e].never&&!s[e]){g=!0;break}for(e=0,i=r.length;i>e;e++)r[e].control&&(s[e]=g);return-1===A.inArray(!0,s)&&(s[0]=!0),s},_classLogic:function(){var t=this,e=this.c.breakpoints,n=this.s.dt,r=n.columns().eq(0).map(function(t){var e=this.column(t),r=e.header().className,o=n.settings()[0].aoColumns[t].responsivePriority;return o===i&&(o=A(e.header).data("priority")!==i?1*A(e.header).data("priority"):1e4),{className:r,includeIn:[],auto:!1,control:!1,never:!!r.match(/\bnever\b/),priority:o}}),o=function(t,e){var i=r[t].includeIn;-1===A.inArray(e,i)&&i.push(e)},s=function(A,i,n,s){var a,l,c;if(n){if("max-"===n)for(a=t._find(i).width,l=0,c=e.length;c>l;l++)e[l].width<=a&&o(A,e[l].name);else if("min-"===n)for(a=t._find(i).width,l=0,c=e.length;c>l;l++)e[l].width>=a&&o(A,e[l].name);else if("not-"===n)for(l=0,c=e.length;c>l;l++)-1===e[l].name.indexOf(s)&&o(A,e[l].name)}else r[A].includeIn.push(i)};r.each(function(t,i){for(var n=t.className.split(" "),r=!1,o=0,a=n.length;a>o;o++){var l=A.trim(n[o]);if("all"===l)return r=!0,void(t.includeIn=A.map(e,function(A){return A.name}));if("none"===l||t.never)return void(r=!0);if("control"===l)return r=!0,void(t.control=!0);A.each(e,function(A,t){var e=t.name.split("-"),n=new RegExp("(min\\-|max\\-|not\\-)?("+e[0]+")(\\-[_a-zA-Z0-9])?"),o=l.match(n);o&&(r=!0,o[2]===e[0]&&o[3]==="-"+e[1]?s(i,t.name,o[1],o[2]+o[3]):o[2]!==e[0]||o[3]||s(i,t.name,o[1],o[2]))})}r||(t.auto=!0)}),this.s.columns=r},_detailsDisplay:function(t,e){var i=this,n=this.s.dt,r=this.c.details.display(t,e,function(){return i.c.details.renderer(n,t[0],i._detailsObj(t[0]))});r!==!0&&r!==!1||A(n.table().node()).triggerHandler("responsive-display.dt",[n,t,r,e])},_detailsInit:function(){var t=this,e=this.s.dt,i=this.c.details;"inline"===i.type&&(i.target="td:first-child"),e.on("draw.dtr",function(){t._tabIndexes()}),t._tabIndexes(),A(e.table().body()).on("keyup.dtr","td",function(t){13===t.keyCode&&A(this).data("dtr-keyboard")&&A(this).click()});var n=i.target,r="string"==typeof n?n:"td";A(e.table().body()).on("mousedown.dtr",r,function(A){A.preventDefault()}).on("click.dtr",r,function(){if(A(e.table().node()).hasClass("collapsed")&&e.row(A(this).closest("tr")).length){if("number"==typeof n){var i=0>n?e.columns().eq(0).length+n:n;if(e.cell(this).index().column!==i)return}var r=e.row(A(this).closest("tr"));t._detailsDisplay(r,!1)}})},_detailsObj:function(t){var e=this,i=this.s.dt;return A.map(this.s.columns,function(A,n){return A.never?void 0:{title:i.settings()[0].aoColumns[n].sTitle,data:i.cell(t,n).render(e.c.orthogonal),hidden:i.column(n).visible()&&!e.s.current[n]}})},_find:function(A){for(var t=this.c.breakpoints,e=0,i=t.length;i>e;e++)if(t[e].name===A)return t[e]},_redrawChildren:function(){var A=this,t=this.s.dt;t.rows({page:"current"}).iterator("row",function(e,i){t.row(i);A._detailsDisplay(t.row(i),!0)})},_resize:function(){var e,i,n=this,r=this.s.dt,o=A(t).width(),s=this.c.breakpoints,a=s[0].name,l=this.s.columns,c=this.s.current.slice();for(e=s.length-1;e>=0;e--)if(o<=s[e].width){a=s[e].name;break}var h=this._columnsVisiblity(a);this.s.current=h;var u=!1;for(e=0,i=l.length;i>e;e++)if(h[e]===!1&&!l[e].never){u=!0;break}A(r.table().node()).toggleClass("collapsed",u);var d=!1;r.columns().eq(0).each(function(A,t){h[t]!==c[t]&&(d=!0,n._setColumnVis(A,h[t]))}),d&&this._redrawChildren()},_resizeAuto:function(){var t=this.s.dt,e=this.s.columns;if(this.c.auto&&-1!==A.inArray(!0,A.map(e,function(A){return A.auto}))){var i=(t.table().node().offsetWidth,t.columns,t.table().node().cloneNode(!1)),n=A(t.table().header().cloneNode(!1)).appendTo(i),r=A(t.table().body().cloneNode(!1)).appendTo(i),o=t.columns().header().filter(function(A){return t.column(A).visible()}).to$().clone(!1).css("display","table-cell");A(r).append(A(t.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");var s=t.table().footer();if(s){var a=A(s.cloneNode(!1)).appendTo(i),l=t.columns().header().filter(function(A){return t.column(A).visible()}).to$().clone(!1).css("display","table-cell");A("<tr/>").append(l).appendTo(a)}A("<tr/>").append(o).appendTo(n),"inline"===this.c.details.type&&A(i).addClass("dtr-inline collapsed");var c=A("<div/>").css({width:1,height:1,overflow:"hidden"}).append(i);c.insertBefore(t.table().node()),o.each(function(A){var i=t.column.index("fromVisible",A);e[i].minWidth=this.offsetWidth||0}),c.remove()}},_setColumnVis:function(t,e){var i=this.s.dt,n=e?"":"none";A(i.column(t).header()).css("display",n),A(i.column(t).footer()).css("display",n),i.column(t).nodes().to$().css("display",n)},_tabIndexes:function(){var t=this.s.dt,e=t.cells({page:"current"}).nodes().to$(),i=t.settings()[0],n=this.c.details.target;e.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]");var r="number"==typeof n?":eq("+n+")":n;A(r,t.rows({page:"current"}).nodes()).attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1)}}),r.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],r.display={childRow:function(t,e,i){return e?A(t.node()).hasClass("parent")?(t.child(i(),"child").show(),!0):void 0:t.child.isShown()?(t.child(!1),A(t.node()).removeClass("parent"),!1):(t.child(i(),"child").show(),A(t.node()).addClass("parent"),!0)},childRowImmediate:function(t,e,i){return!e&&t.child.isShown()||!t.responsive.hasHidden()?(t.child(!1),A(t.node()).removeClass("parent"),!1):(t.child(i(),"child").show(),A(t.node()).addClass("parent"),!0)},modal:function(t){return function(i,n,r){if(n)A("div.dtr-modal-content").empty().append(r());else{var o=function(){s.remove(),A(e).off("keypress.dtr")},s=A('<div class="dtr-modal"/>').append(A('<div class="dtr-modal-display"/>').append(A('<div class="dtr-modal-content"/>').append(r())).append(A('<div class="dtr-modal-close">&times;</div>').click(function(){o()}))).append(A('<div class="dtr-modal-background"/>').click(function(){o()})).appendTo("body");t&&t.header&&s.find("div.dtr-modal-content").prepend("<h2>"+t.header(i)+"</h2>"),A(e).on("keyup.dtr",function(A){27===A.keyCode&&(A.stopPropagation(),o())})}}}},r.defaults={breakpoints:r.breakpoints,auto:!0,details:{display:r.display.childRow,renderer:function(t,e,i){var n=A.map(i,function(A,t){return A.hidden?'<li data-dtr-index="'+t+'"><span class="dtr-title">'+A.title+'</span> <span class="dtr-data">'+A.data+"</span></li>":""}).join("");return n?A('<ul data-dtr-index="'+e+'"/>').append(n):!1},target:0,type:"inline"},orthogonal:"display"};var o=A.fn.dataTable.Api;return o.register("responsive()",function(){return this}),o.register("responsive.index()",function(t){return t=A(t),{column:t.data("dtr-index"),row:t.parent().data("dtr-index")}}),o.register("responsive.rebuild()",function(){return this.iterator("table",function(A){A._responsive&&A._responsive._classLogic()})}),o.register("responsive.recalc()",function(){return this.iterator("table",function(A){A._responsive&&(A._responsive._resizeAuto(),A._responsive._resize())})}),o.register("responsive.hasHidden()",function(){var t=this.context[0];return t._responsive?-1!==A.inArray(!1,t._responsive.s.current):!1}),r.version="2.0.0",A.fn.dataTable.Responsive=r,A.fn.DataTable.Responsive=r,A(e).on("init.dt.dtr",function(t,e){if("dt"===t.namespace&&(A(e.nTable).hasClass("responsive")||A(e.nTable).hasClass("dt-responsive")||e.oInit.responsive||n.defaults.responsive)){var i=e.oInit.responsive;i!==!1&&new r(e,A.isPlainObject(i)?i:{})}}),r});