/* @license
morris.js v0.5.1
Copyright 2014 Olly Smith All rights reserved.
Licensed under the BSD-2-Clause License.
*/
(function(){var t,A,e,i,n=[].slice,s=function(t,A){return function(){return t.apply(A,arguments)}},r={}.hasOwnProperty,o=function(t,A){function e(){this.constructor=t}for(var i in A)r.call(A,i)&&(t[i]=A[i]);return e.prototype=A.prototype,t.prototype=new e,t.__super__=A.prototype,t},a=[].indexOf||function(t){for(var A=0,e=this.length;e>A;A++)if(A in this&&this[A]===t)return A;return-1};A=window.Morris={},t=jQuery,A.EventEmitter=function(){function t(){}return t.prototype.on=function(t,A){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(A),this},t.prototype.fire=function(){var t,A,e,i,s,r,o;if(e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[e]){for(r=this.handlers[e],o=[],i=0,s=r.length;s>i;i++)A=r[i],o.push(A.apply(null,t));return o}},t}(),A.commas=function(t){var A,e,i,n;return null!=t?(i=0>t?"-":"",A=Math.abs(t),e=Math.floor(A).toFixed(0),i+=e.replace(/(?=(?:\d{3})+$)(?!^)/g,","),n=A.toString(),n.length>e.length&&(i+=n.slice(e.length)),i):"-"},A.pad2=function(t){return(10>t?"0":"")+t},A.Grid=function(e){function i(A){this.hasToShow=s(this.hasToShow,this),this.resizeHandler=s(this.resizeHandler,this);var e=this;if("string"==typeof A.element?this.el=t(document.getElementById(A.element)):this.el=t(A.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=t.extend({},this.gridDefaults,this.defaults||{},A),"string"==typeof this.options.units&&(this.options.postUnits=A.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var A,i,n,s,r;return i=e.el.offset(),r=t.pageX-i.left,e.selectFrom?(A=e.data[e.hitTest(Math.min(r,e.selectFrom))]._x,n=e.data[e.hitTest(Math.max(r,e.selectFrom))]._x,s=n-A,e.selectionRect.attr({x:A,width:s})):e.fire("hovermove",r,t.pageY-i.top)}),this.el.bind("mouseleave",function(){return e.selectFrom&&(e.selectionRect.hide(),e.selectFrom=null),e.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var A,i;return i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],A=e.el.offset(),e.fire("hovermove",i.pageX-A.left,i.pageY-A.top)}),this.el.bind("click",function(t){var A;return A=e.el.offset(),e.fire("gridclick",t.pageX-A.left,t.pageY-A.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(t){var A;return A=e.el.offset(),e.startRange(t.pageX-A.left)}),this.el.bind("mouseup",function(t){var A;return A=e.el.offset(),e.endRange(t.pageX-A.left),e.fire("hovermove",t.pageX-A.left,t.pageY-A.top)})),this.options.resize&&t(window).bind("resize",function(){return null!=e.timeoutId&&window.clearTimeout(e.timeoutId),e.timeoutId=window.setTimeout(e.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return o(i,e),i.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},i.prototype.setData=function(e,i){var n,s,r,o,a,l,h,c,u,d,f,g,p,B,w,m,v,E,b,I,C;if(null==i&&(i=!0),this.options.data=e,null==e||0===e.length)return this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide());if(w=this.cumulative?0:null,m=this.cumulative?0:null,this.options.goals.length>0&&(h=Math.min.apply(Math,this.options.goals),l=Math.max.apply(Math,this.options.goals),m=null!=m?Math.min(m,h):h,w=null!=w?Math.max(w,l):l),this.data=function(){var t,i,n;for(n=[],a=t=0,i=e.length;i>t;a=++t)u=e[a],c={src:u},c.label=u[this.options.xkey],this.options.parseTime?(c.x=A.parseDate(c.label),this.options.dateFormat?c.label=this.options.dateFormat(c.x):"number"==typeof c.label&&(c.label=new Date(c.label).toString())):(c.x=a,this.options.xLabelFormat&&(c.label=this.options.xLabelFormat(c))),g=0,c.y=function(){var t,A,e,i;for(e=this.options.ykeys,i=[],o=t=0,A=e.length;A>t;o=++t)B=e[o],v=u[B],"string"==typeof v&&(v=parseFloat(v)),null!=v&&"number"!=typeof v&&(v=null),null!=v&&this.hasToShow(o)&&(this.cumulative?g+=v:null!=w?(w=Math.max(v,w),m=Math.min(v,m)):w=m=v),this.cumulative&&null!=g&&(w=Math.max(g,w),m=Math.min(g,m)),i.push(v);return i}.call(this),n.push(c);return n}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,A){return(t.x>A.x)-(A.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0){if(this.options.parseTime)for(I=this.options.events,E=0,b=I.length;b>E;E++)n=I[E],n instanceof Array?(r=n[0],f=n[1],this.events.push([A.parseDate(r),A.parseDate(f)])):this.events.push(A.parseDate(n));else this.events=this.options.events;s=t.map(this.events,function(t){return t}),this.xmax=Math.max(this.xmax,Math.max.apply(Math,s)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,s))}return this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",m),this.ymax=this.yboundary("max",w),this.ymin===this.ymax&&(m&&(this.ymin-=1),this.ymax+=1),(C=this.options.axes)!==!0&&"both"!==C&&"y"!==C&&this.options.grid!==!0||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(d=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var t,A,e,i;for(i=[],p=t=A=this.ymin,e=this.ymax;d>0?e>=t:t>=e;p=t+=d)i.push(p);return i}.call(this))),this.dirty=!0,i?this.redraw():void 0},i.prototype.yboundary=function(t,A){var e,i;return e=this.options["y"+t],"string"==typeof e?"auto"===e.slice(0,4)?e.length>5?(i=parseInt(e.slice(5),10),null==A?i:Math[t](A,i)):null!=A?A:0:parseInt(e,10):e},i.prototype.autoGridLines=function(t,A,e){var i,n,s,r,o,a,l,h,c;return o=A-t,c=Math.floor(Math.log(o)/Math.log(10)),l=Math.pow(10,c),n=Math.floor(t/l)*l,i=Math.ceil(A/l)*l,a=(i-n)/(e-1),1===l&&a>1&&Math.ceil(a)!==a&&(a=Math.ceil(a),i=n+a*(e-1)),0>n&&i>0&&(n=Math.floor(t/a)*a,i=Math.ceil(A/a)*a),1>a?(r=Math.floor(Math.log(a)/Math.log(10)),s=function(){var t,A;for(A=[],h=t=n;a>0?i>=t:t>=i;h=t+=a)A.push(parseFloat(h.toFixed(1-r)));return A}()):s=function(){var t,A;for(A=[],h=t=n;a>0?i>=t:t>=i;h=t+=a)A.push(h);return A}(),s},i.prototype._calc=function(){var t,A,e,i,n,s,r,o,a;return s=this.el.width(),i=this.el.height(),(this.elementWidth!==s||this.elementHeight!==i||this.dirty)&&(this.elementWidth=s,this.elementHeight=i,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,(o=this.options.axes)!==!0&&"both"!==o&&"y"!==o||(r=function(){var t,A,i,n;for(i=this.grid,n=[],t=0,A=i.length;A>t;t++)e=i[t],n.push(this.measureText(this.yAxisFormat(e)).width);return n}.call(this),this.options.horizontal?this.bottom-=Math.max.apply(Math,r):this.left+=Math.max.apply(Math,r)),(a=this.options.axes)!==!0&&"both"!==a&&"x"!==a||(t=this.options.horizontal?-90:-this.options.xLabelAngle,A=function(){var A,e,i;for(i=[],n=A=0,e=this.data.length;e>=0?e>A:A>e;n=e>=0?++A:--A)i.push(this.measureText(this.data[n].label,t).height);return i}.call(this),this.options.horizontal?this.left+=Math.max.apply(Math,A):this.bottom-=Math.max.apply(Math,A)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.options.horizontal?(this.dx=this.height/(this.xmax-this.xmin),this.dy=this.width/(this.ymax-this.ymin),this.yStart=this.left,this.yEnd=this.right,this.xStart=this.top,this.xEnd=this.bottom,this.xSize=this.height,this.ySize=this.width):(this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.yStart=this.bottom,this.yEnd=this.top,this.xStart=this.left,this.xEnd=this.right,this.xSize=this.width,this.ySize=this.height),this.calc)?this.calc():void 0},i.prototype.transY=function(t){return this.options.horizontal?this.left+(t-this.ymin)*this.dy:this.bottom-(t-this.ymin)*this.dy},i.prototype.transX=function(t){return 1===this.data.length?(this.xStart+this.xEnd)/2:this.xStart+(t-this.xmin)*this.dx},i.prototype.redraw=function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},i.prototype.measureText=function(t,A){var e,i;return null==A&&(A=0),i=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(A),e=i.getBBox(),i.remove(),e},i.prototype.yAxisFormat=function(t){return this.yLabelFormat(t,0)},i.prototype.yLabelFormat=function(t,e){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t,e):""+this.options.preUnits+A.commas(t)+this.options.postUnits},i.prototype.getYAxisLabelX=function(){return this.left-this.options.padding/2},i.prototype.drawGrid=function(){var t,A,e,i,n,s,r,o,a;if(this.options.grid!==!1||(s=this.options.axes)===!0||"both"===s||"y"===s){for(t=this.options.horizontal?this.getXAxisLabelY():this.getYAxisLabelX(),r=this.grid,a=[],i=0,n=r.length;n>i;i++)A=r[i],e=this.transY(A),(o=this.options.axes)!==!0&&"both"!==o&&"y"!==o||(this.options.horizontal?this.drawXAxisLabel(e,t,this.yAxisFormat(A)):this.drawYAxisLabel(t,e,this.yAxisFormat(A))),this.options.grid?(e=Math.floor(e)+.5,this.options.horizontal?a.push(this.drawGridLine("M"+e+","+this.xStart+"V"+this.xEnd)):a.push(this.drawGridLine("M"+this.xStart+","+e+"H"+this.xEnd))):a.push(void 0);return a}},i.prototype.drawGoals=function(){var t,A,e,i,n,s,r;for(s=this.options.goals,r=[],e=i=0,n=s.length;n>i;e=++i)A=s[e],t=this.options.goalLineColors[e%this.options.goalLineColors.length],r.push(this.drawGoal(A,t));return r},i.prototype.drawEvents=function(){var t,A,e,i,n,s,r;for(s=this.events,r=[],e=i=0,n=s.length;n>i;e=++i)A=s[e],t=this.options.eventLineColors[e%this.options.eventLineColors.length],r.push(this.drawEvent(A,t));return r},i.prototype.drawGoal=function(t,A){var e,i;return i=Math.floor(this.transY(t))+.5,e=this.options.horizontal?"M"+i+","+this.xStart+"V"+this.xEnd:"M"+this.xStart+","+i+"H"+this.xEnd,this.raphael.path(e).attr("stroke",A).attr("stroke-width",this.options.goalStrokeWidth)},i.prototype.drawEvent=function(t,A){var e,i,n,s;return t instanceof Array?(e=t[0],n=t[1],e=Math.floor(this.transX(e))+.5,n=Math.floor(this.transX(n))+.5,this.options.horizontal?this.raphael.rect(this.yStart,e,this.yEnd-this.yStart,n-e).attr({fill:A,stroke:!1}).toBack():this.raphael.rect(e,this.yEnd,n-e,this.yStart-this.yEnd).attr({fill:A,stroke:!1}).toBack()):(s=Math.floor(this.transX(t))+.5,i=this.options.horizontal?"M"+this.yStart+","+s+"H"+this.yEnd:"M"+s+","+this.yStart+"V"+this.yEnd,this.raphael.path(i).attr("stroke",A).attr("stroke-width",this.options.eventStrokeWidth))},i.prototype.drawYAxisLabel=function(t,A,e){return this.raphael.text(t,A,e).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},i.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},i.prototype.startRange=function(t){return this.hover.hide(),this.selectFrom=t,this.selectionRect.attr({x:t,width:0}).show()},i.prototype.endRange=function(t){var A,e;return this.selectFrom?(e=Math.min(this.selectFrom,t),A=Math.max(this.selectFrom,t),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(e)].x,end:this.data[this.hitTest(A)].x}),this.selectFrom=null):void 0},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i.prototype.hasToShow=function(t){return this.options.shown===!0||this.options.shown[t]===!0},i}(A.EventEmitter),A.parseDate=function(t){var A,e,i,n,s,r,o,a,l,h,c;return"number"==typeof t?t:(e=t.match(/^(\d+) Q(\d)$/),n=t.match(/^(\d+)-(\d+)$/),s=t.match(/^(\d+)-(\d+)-(\d+)$/),o=t.match(/^(\d+) W(\d+)$/),a=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),e?new Date(parseInt(e[1],10),3*parseInt(e[2],10)-1,1).getTime():n?new Date(parseInt(n[1],10),parseInt(n[2],10)-1,1).getTime():s?new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)).getTime():o?(h=new Date(parseInt(o[1],10),0,1),4!==h.getDay()&&h.setMonth(0,1+(4-h.getDay()+7)%7),h.getTime()+6048e5*parseInt(o[2],10)):a?a[6]?(r=0,"Z"!==a[6]&&(r=60*parseInt(a[8],10)+parseInt(a[9],10),"+"===a[7]&&(r=0-r)),Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)+r)):new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)).getTime():l?(c=parseFloat(l[6]),A=Math.floor(c),i=Math.round(1e3*(c-A)),l[8]?(r=0,"Z"!==l[8]&&(r=60*parseInt(l[10],10)+parseInt(l[11],10),"+"===l[9]&&(r=0-r)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+r,A,i)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10),A,i).getTime()):new Date(parseInt(t,10),0,1).getTime())},A.Hover=function(){function e(e){null==e&&(e={}),this.options=t.extend({},A.Hover.defaults,e),this.el=t("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return e.defaults={"class":"morris-hover morris-default-style"},e.prototype.update=function(t,A,e,i){return t?(this.html(t),this.show(),this.moveTo(A,e,i)):this.hide()},e.prototype.html=function(t){return this.el.html(t)},e.prototype.moveTo=function(t,A,e){var i,n,s,r,o,a;return o=this.options.parent.innerWidth(),r=this.options.parent.innerHeight(),n=this.el.outerWidth(),i=this.el.outerHeight(),s=Math.min(Math.max(0,t-n/2),o-n),null!=A?e===!0?(a=A-i/2,0>a&&(a=0)):(a=A-i-10,0>a&&(a=A+10,a+i>r&&(a=r/2-i/2))):a=r/2-i/2,this.el.css({left:s+"px",top:parseInt(a)+"px"})},e.prototype.show=function(){return this.el.show()},e.prototype.hide=function(){return this.el.hide()},e}(),A.Line=function(e){function i(t){return this.hilight=s(this.hilight,this),this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof A.Line?void i.__super__.constructor.call(this,t):new A.Line(t)}return o(i,e),i.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new A.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,shown:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1,trendLine:!1,trendLineWidth:2,trendLineColors:["#689bc3","#a2b3bf","#64b764"]},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var t,A,e,i,n,s;for(n=this.data,s=[],e=0,i=n.length;i>e;e++)t=n[e],t._x=this.transX(t.x),t._y=function(){var e,i,n,s;for(n=t.y,s=[],e=0,i=n.length;i>e;e++)A=n[e],null!=A?s.push(this.transY(A)):s.push(A);return s}.call(this),s.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var e,i,n,s;for(n=t._y,s=[],e=0,i=n.length;i>e;e++)A=n[e],null!=A&&s.push(A);return s}())));return s},i.prototype.hitTest=function(t){var A,e,i,n,s;if(0===this.data.length)return null;for(s=this.data.slice(1),A=i=0,n=s.length;n>i&&(e=s[A],!(t<(e._x+this.data[A]._x)/2));A=++i);return A},i.prototype.onGridClick=function(t,A){var e;return e=this.hitTest(t),this.fire("click",e,this.data[e].src,t,A)},i.prototype.onHoverMove=function(t){var A;return A=this.hitTest(t),this.displayHoverForRow(A)},i.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.displayHoverForRow(null):void 0},i.prototype.displayHoverForRow=function(t){var A;return null!=t?((A=this.hover).update.apply(A,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(A){var e,i,n,s,r,o,a;for(n=this.data[A],e=t("<div class='morris-hover-row-label'>").text(n.label),e=e.prop("outerHTML"),a=n.y,i=r=0,o=a.length;o>r;i=++r)s=a[i],this.options.labels[i]!==!1&&(e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s,i)+"\n</div>");return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(A,this.options,e,n.src)),[e,n._x,n._ymax]},i.prototype.generatePaths=function(){var t,e,i,n;return this.paths=function(){var s,r,o,l;for(l=[],e=s=0,r=this.options.ykeys.length;r>=0?r>s:s>r;e=r>=0?++s:--s)n="boolean"==typeof this.options.smooth?this.options.smooth:(o=this.options.ykeys[e],a.call(this.options.smooth,o)>=0),t=function(){var t,A,n,s;for(n=this.data,s=[],t=0,A=n.length;A>t;t++)i=n[t],void 0!==i._y[e]&&s.push({x:i._x,y:i._y[e]});return s}.call(this),t.length>1?l.push(A.Line.createPath(t,n,this.bottom)):l.push(null);return l}.call(this)},i.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1?this.displayHoverForRow(this.data.length-1):void 0},i.prototype.drawXAxis=function(){var t,e,i,n,s,r,o,a,l,h,c=this;for(o=this.bottom+this.options.padding/2,s=null,n=null,t=function(t,A){var e,i,r,a,l;return e=c.drawXAxisLabel(c.transX(A),o,t),l=e.getBBox(),e.transform("r"+-c.options.xLabelAngle),i=e.getBBox(),e.transform("t0,"+i.height/2+"..."),0!==c.options.xLabelAngle&&(a=-.5*l.width*Math.cos(c.options.xLabelAngle*Math.PI/180),e.transform("t"+a+",0...")),i=e.getBBox(),(null==s||s>=i.x+i.width||null!=n&&n>=i.x)&&i.x>=0&&i.x+i.width<c.el.width()?(0!==c.options.xLabelAngle&&(r=1.25*c.options.gridTextSize/Math.sin(c.options.xLabelAngle*Math.PI/180),n=i.x-r),s=i.x-c.options.xLabelMargin):e.remove()},i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:A.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,A,e,i;for(e=this.data,i=[],t=0,A=e.length;A>t;t++)r=e[t],i.push([r.label,r.x]);return i}.call(this),i.reverse(),h=[],a=0,l=i.length;l>a;a++)e=i[a],h.push(t(e[0],e[1]));return h},i.prototype.drawSeries=function(){var t,A,e,i,n,s;for(this.seriesPoints=[],t=A=i=this.options.ykeys.length-1;0>=i?0>=A:A>=0;t=0>=i?++A:--A)this.hasToShow(t)&&((this.options.trendLine!==!1&&this.options.trendLine===!0||this.options.trendLine[t]===!0)&&this._drawTrendLine(t),this._drawLineFor(t));for(s=[],t=e=n=this.options.ykeys.length-1;0>=n?0>=e:e>=0;t=0>=n?++e:--e)this.hasToShow(t)?s.push(this._drawPointFor(t)):s.push(void 0);return s},i.prototype._drawPointFor=function(t){var A,e,i,n,s,r;for(this.seriesPoints[t]=[],s=this.data,r=[],i=0,n=s.length;n>i;i++)e=s[i],A=null,null!=e._y[t]&&(A=this.drawLinePoint(e._x,e._y[t],this.colorFor(e,t,"point"),t)),r.push(this.seriesPoints[t].push(A));return r},i.prototype._drawLineFor=function(t){var A;return A=this.paths[t],null!==A?this.drawLinePath(A,this.colorFor(null,t,"line"),t):void 0},i.prototype._drawTrendLine=function(t){var e,i,n,s,r,o,a,l,h,c,u,d,f,g,p;for(o=0,h=0,a=0,l=0,s=0,p=this.data,f=0,g=p.length;g>f;f++)c=p[f],u=c.x,d=c.y[t],void 0!==d&&(s+=1,o+=u,h+=d,a+=u*u,l+=u*d);return e=(s*l-o*h)/(s*a-o*o),i=h/s-e*o/s,n=[{},{}],n[0].x=this.transX(this.data[0].x),n[0].y=this.transY(this.data[0].x*e+i),n[1].x=this.transX(this.data[this.data.length-1].x),n[1].y=this.transY(this.data[this.data.length-1].x*e+i),r=A.Line.createPath(n,!1,this.bottom),r=this.raphael.path(r).attr("stroke",this.colorFor(null,t,"trendLine")).attr("stroke-width",this.options.trendLineWidth)},i.createPath=function(t,e,i){var n,s,r,o,a,l,h,c,u,d,f,g,p,B;for(h="",e&&(r=A.Line.gradients(t)),c={y:null},o=p=0,B=t.length;B>p;o=++p)n=t[o],null!=n.y&&(null!=c.y?e?(s=r[o],l=r[o-1],a=(n.x-c.x)/4,u=c.x+a,f=Math.min(i,c.y+a*l),d=n.x-a,g=Math.min(i,n.y-a*s),h+="C"+u+","+f+","+d+","+g+","+n.x+","+n.y):h+="L"+n.x+","+n.y:e&&null==r[o]||(h+="M"+n.x+","+n.y)),c=n;return h},i.gradients=function(t){var A,e,i,n,s,r,o,a;for(e=function(t,A){return(t.y-A.y)/(t.x-A.x)},a=[],i=r=0,o=t.length;o>r;i=++r)A=t[i],null!=A.y?(n=t[i+1]||{y:null},s=t[i-1]||{y:null},null!=s.y&&null!=n.y?a.push(e(s,n)):null!=s.y?a.push(e(s,A)):null!=n.y?a.push(e(A,n)):a.push(null)):a.push(null);return a},i.prototype.hilight=function(t){var A,e,i,n,s;if(null!==this.prevHilight&&this.prevHilight!==t)for(A=e=0,n=this.seriesPoints.length-1;n>=0?n>=e:e>=n;A=n>=0?++e:--e)this.seriesPoints[A][this.prevHilight]&&this.seriesPoints[A][this.prevHilight].animate(this.pointShrinkSeries(A));if(null!==t&&this.prevHilight!==t)for(A=i=0,s=this.seriesPoints.length-1;s>=0?s>=i:i>=s;A=s>=0?++i:--i)this.seriesPoints[A][t]&&this.seriesPoints[A][t].animate(this.pointGrowSeries(A));return this.prevHilight=t},i.prototype.colorFor=function(t,A,e){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,A,e):"point"===e?this.options.pointFillColors[A%this.options.pointFillColors.length]||this.options.lineColors[A%this.options.lineColors.length]:"line"===e?this.options.lineColors[A%this.options.lineColors.length]:this.options.trendLineColors[A%this.options.trendLineColors.length]},i.prototype.drawXAxisLabel=function(t,A,e){return this.raphael.text(t,A,e).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(t,A,e){return this.raphael.path(t).attr("stroke",A).attr("stroke-width",this.lineWidthForSeries(e))},i.prototype.drawLinePoint=function(t,A,e,i){return this.raphael.circle(t,A,this.pointSizeForSeries(i)).attr("fill",e).attr("stroke-width",this.pointStrokeWidthForSeries(i)).attr("stroke",this.pointStrokeColorForSeries(i))},i.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]},i.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},i.prototype.lineWidthForSeries=function(t){return this.options.lineWidth instanceof Array?this.options.lineWidth[t%this.options.lineWidth.length]:this.options.lineWidth},i.prototype.pointSizeForSeries=function(t){return this.options.pointSize instanceof Array?this.options.pointSize[t%this.options.pointSize.length]:this.options.pointSize},i.prototype.pointGrowSeries=function(t){return 0!==this.pointSizeForSeries(t)?Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear"):void 0},i.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")},i}(A.Grid),A.labelSeries=function(e,i,n,s,r){var o,a,l,h,c,u,d,f,g,p,B;if(l=200*(i-e)/n,a=new Date(e),d=A.LABEL_SPECS[s],void 0===d)for(B=A.AUTO_LABEL_ORDER,g=0,p=B.length;p>g;g++)if(h=B[g],u=A.LABEL_SPECS[h],l>=u.span){d=u;break}for(void 0===d&&(d=A.LABEL_SPECS.second),r&&(d=t.extend({},d,{fmt:r})),o=d.start(a),c=[];(f=o.getTime())<=i;)f>=e&&c.push([d.fmt(o),f]),d.incr(o);return c},e=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+A.pad2(t.getHours())+":"+A.pad2(t.getMinutes())},incr:function(A){return A.setUTCMinutes(A.getUTCMinutes()+t)}}},i=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+A.pad2(t.getHours())+":"+A.pad2(t.getMinutes())+":"+A.pad2(t.getSeconds())},incr:function(A){return A.setUTCSeconds(A.getUTCSeconds()+t)}}},A.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+A.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+A.pad2(t.getMonth()+1)+"-"+A.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+A.pad2(t.getMonth()+1)+"-"+A.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:e(60),"30min":e(30),"15min":e(15),"10min":e(10),"5min":e(5),minute:e(1),"30sec":i(30),"15sec":i(15),"10sec":i(10),"5sec":i(5),second:i(1)},A.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],A.Area=function(e){function i(e){var s;return this instanceof A.Area?(s=t.extend({},n,e),this.cumulative=!s.behaveLikeLine,"auto"===s.fillOpacity&&(s.fillOpacity=s.behaveLikeLine?.8:1),void i.__super__.constructor.call(this,s)):new A.Area(e)}var n;return o(i,e),n={fillOpacity:"auto",behaveLikeLine:!1},i.prototype.calcPoints=function(){var t,A,e,i,n,s,r;for(s=this.data,r=[],i=0,n=s.length;n>i;i++)t=s[i],t._x=this.transX(t.x),A=0,t._y=function(){var i,n,s,r;for(s=t.y,r=[],i=0,n=s.length;n>i;i++)e=s[i],this.options.behaveLikeLine?r.push(this.transY(e)):(A+=e||0,r.push(this.transY(A)));return r}.call(this),r.push(t._ymax=Math.max.apply(Math,t._y));return r},i.prototype.drawSeries=function(){var t,A,e,i,n,s,r,o;for(this.seriesPoints=[],A=this.options.behaveLikeLine?function(){s=[];for(var t=0,A=this.options.ykeys.length-1;A>=0?A>=t:t>=A;A>=0?t++:t--)s.push(t);return s}.apply(this):function(){r=[];for(var t=n=this.options.ykeys.length-1;0>=n?0>=t:t>=0;0>=n?t++:t--)r.push(t);return r}.apply(this),o=[],e=0,i=A.length;i>e;e++)t=A[e],this._drawFillFor(t),this._drawLineFor(t),o.push(this._drawPointFor(t));return o},i.prototype._drawFillFor=function(t){var A;return A=this.paths[t],null!==A?(A+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(A,this.fillForSeries(t))):void 0},i.prototype.fillForSeries=function(t){var A;return A=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line")),Raphael.hsl(A.h,this.options.behaveLikeLine?.9*A.s:.75*A.s,Math.min(.98,this.options.behaveLikeLine?1.2*A.l:1.25*A.l))},i.prototype.drawFilledPath=function(t,A){return this.raphael.path(t).attr("fill",A).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},i}(A.Line),A.Bar=function(e){function i(e){return this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof A.Bar?void i.__super__.constructor.call(this,t.extend({},e,{parseTime:!1})):new A.Bar(e)}return o(i,e),i.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new A.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50,horizontal:!1,shown:!0},i.prototype.calc=function(){var t;return this.calcBars(),this.options.hideHover===!1?(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1)):void 0},i.prototype.calcBars=function(){var t,A,e,i,n,s,r;for(s=this.data,r=[],t=i=0,n=s.length;n>i;t=++i)A=s[t],A._x=this.xStart+this.xSize*(t+.5)/this.data.length,r.push(A._y=function(){var t,i,n,s;for(n=A.y,s=[],t=0,i=n.length;i>t;t++)e=n[t],null!=e?s.push(this.transY(e)):s.push(null);return s}.call(this));return r},i.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var t,A,e,i,n,s,r,o,a,l,h,c,u,d,f,g,p;for(A=this.options.horizontal?this.getYAxisLabelX():this.getXAxisLabelY(),l=null,a=null,p=[],e=f=0,g=this.data.length;g>=0?g>f:f>g;e=g>=0?++f:--f)h=this.data[this.data.length-1-e],i=this.options.horizontal?this.drawYAxisLabel(A,h._x-.5*this.options.gridTextSize,h.label):this.drawXAxisLabel(h._x,A,h.label),t=this.options.horizontal?0:this.options.xLabelAngle,d=i.getBBox(),i.transform("r"+-t),n=i.getBBox(),i.transform("t0,"+n.height/2+"..."),0!==t&&(o=-.5*d.width*Math.cos(t*Math.PI/180),i.transform("t"+o+",0...")),this.options.horizontal?(u=n.y,c=n.height,r=this.el.height()):(u=n.x,c=n.width,r=this.el.width()),(null==l||l>=u+c||null!=a&&a>=u)&&u>=0&&r>u+c?(0!==t&&(s=1.25*this.options.gridTextSize/Math.sin(t*Math.PI/180),a=u-s),this.options.horizontal?p.push(l=u):p.push(l=u-this.options.xLabelMargin)):p.push(i.remove());return p},i.prototype.getXAxisLabelY=function(){return this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2)},i.prototype.drawSeries=function(){var t,A,e,i,n,s,r,o,a,l,h,c,u,d,f,g,p,B;if(e=this.xSize/this.options.data.length,this.options.stacked)a=1;else for(a=0,i=p=0,B=this.options.ykeys.length-1;B>=0?B>=p:p>=B;i=B>=0?++p:--p)this.hasToShow(i)&&(a+=1);return t=(e*this.options.barSizeRatio-this.options.barGap*(a-1))/a,this.options.barSize&&(t=Math.min(t,this.options.barSize)),u=e-t*a-this.options.barGap*(a-1),o=u/2,g=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var i,a,u,p;for(u=this.data,p=[],n=i=0,a=u.length;a>i;n=++i)l=u[n],s=0,p.push(function(){var i,a,u,p;for(u=l._y,p=[],h=i=0,a=u.length;a>i;h=++i)f=u[h],this.hasToShow(h)&&(null!==f?(g?(d=Math.min(f,g),A=Math.max(f,g)):(d=f,A=this.bottom),r=this.xStart+n*e+o,this.options.stacked||(r+=h*(t+this.options.barGap)),c=A-d,this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)&&(this.options.horizontal?this.drawBar(this.yStart,this.xStart+n*e,this.ySize,e,this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius):this.drawBar(this.xStart+n*e,this.yEnd,e,this.ySize,this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius)),this.options.stacked&&(d-=s),this.options.horizontal?(this.drawBar(d,r,c,t,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius),p.push(s-=c)):(this.drawBar(r,d,t,c,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius),p.push(s+=c))):p.push(null));return p}.call(this));return p}.call(this)},i.prototype.colorFor=function(t,A,e){var i,n;return"function"==typeof this.options.barColors?(i={x:t.x,y:t.y[A],label:t.label},n={index:A,key:this.options.ykeys[A],label:this.options.labels[A]},this.options.barColors.call(this,i,n,e)):this.options.barColors[A%this.options.barColors.length]},i.prototype.hitTest=function(t,A){var e;return 0===this.data.length?null:(e=this.options.horizontal?A:t,e=Math.max(Math.min(e,this.xEnd),this.xStart),Math.min(this.data.length-1,Math.floor((e-this.xStart)/(this.xSize/this.data.length))))},i.prototype.onGridClick=function(t,A){var e;return e=this.hitTest(t,A),this.fire("click",e,this.data[e].src,t,A)},i.prototype.onHoverMove=function(t,A){var e,i;return e=this.hitTest(t,A),(i=this.hover).update.apply(i,this.hoverContentForRow(e))},i.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.hover.hide():void 0},i.prototype.hoverContentForRow=function(A){var e,i,n,s,r,o,a,l;for(n=this.data[A],e=t("<div class='morris-hover-row-label'>").text(n.label),e=e.prop("outerHTML"),l=n.y,i=o=0,a=l.length;a>o;i=++o)r=l[i],this.options.labels[i]!==!1&&(e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(r,i)+"\n</div>");
return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(A,this.options,e,n.src)),this.options.horizontal?(s=this.left+.5*this.width,r=this.top+(A+.5)*this.height/this.data.length,[e,s,r,!0]):(s=this.left+(A+.5)*this.width/this.data.length,[e,s])},i.prototype.drawXAxisLabel=function(t,A,e){var i;return i=this.raphael.text(t,A,e).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(t,A,e,i,n,s,r){var o,a;return o=Math.max.apply(Math,r),a=0===o||o>i?this.raphael.rect(t,A,e,i):this.raphael.path(this.roundedRect(t,A,e,i,r)),a.attr("fill",n).attr("fill-opacity",s).attr("stroke","none")},i.prototype.roundedRect=function(t,A,e,i,n){return null==n&&(n=[0,0,0,0]),["M",t,n[0]+A,"Q",t,A,t+n[0],A,"L",t+e-n[1],A,"Q",t+e,A,t+e,A+n[1],"L",t+e,A+i-n[2],"Q",t+e,A+i,t+e-n[2],A+i,"L",t+n[3],A+i,"Q",t,A+i,t,A+i-n[3],"Z"]},i}(A.Grid),A.Donut=function(e){function i(e){this.resizeHandler=s(this.resizeHandler,this),this.select=s(this.select,this),this.click=s(this.click,this);var i=this;if(!(this instanceof A.Donut))return new A.Donut(e);if(this.options=t.extend({},this.defaults,e),"string"==typeof e.element?this.el=t(document.getElementById(e.element)):this.el=t(e.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==e.data&&0!==e.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&t(window).bind("resize",function(){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.setData(e.data))}return o(i,e),i.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:A.commas,resize:!1},i.prototype.redraw=function(){var t,e,i,n,s,r,o,a,l,h,c,u,d,f,g,p,B,w,m,v,E,b,I;for(this.raphael.clear(),e=this.el.width()/2,i=this.el.height()/2,d=(Math.min(e,i)-10)/3,c=0,v=this.values,f=0,B=v.length;B>f;f++)u=v[f],c+=u;for(a=5/(2*d),t=1.9999*Math.PI-a*this.data.length,r=0,s=0,this.segments=[],E=this.values,n=g=0,w=E.length;w>g;n=++g)u=E[n],l=r+a+t*(u/c),h=new A.DonutSegment(e,i,2*d,d,r,l,this.data[n].color||this.options.colors[s%this.options.colors.length],this.options.backgroundColor,s,this.raphael),h.render(),this.segments.push(h),h.on("hover",this.select),h.on("click",this.click),r=l,s+=1;for(this.text1=this.drawEmptyDonutLabel(e,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(e,i+10,this.options.labelColor,14),o=Math.max.apply(Math,this.values),s=0,b=this.values,I=[],p=0,m=b.length;m>p;p++){if(u=b[p],u===o){this.select(s);break}I.push(s+=1)}return I},i.prototype.setData=function(t){var A;return this.data=t,this.values=function(){var t,e,i,n;for(i=this.data,n=[],t=0,e=i.length;e>t;t++)A=i[t],n.push(parseFloat(A.value));return n}.call(this),this.redraw()},i.prototype.click=function(t){return this.fire("click",t,this.data[t])},i.prototype.select=function(t){var A,e,i,n,s,r;for(r=this.segments,n=0,s=r.length;s>n;n++)e=r[n],e.deselect();return i=this.segments[t],i.select(),A=this.data[t],this.setLabels(A.label,this.options.formatter(A.value,A))},i.prototype.setLabels=function(t,A){var e,i,n,s,r,o,a,l;return e=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,s=1.8*e,n=e/2,i=e/3,this.text1.attr({text:t,transform:""}),r=this.text1.getBBox(),o=Math.min(s/r.width,n/r.height),this.text1.attr({transform:"S"+o+","+o+","+(r.x+r.width/2)+","+(r.y+r.height)}),this.text2.attr({text:A,transform:""}),a=this.text2.getBBox(),l=Math.min(s/a.width,i/a.height),this.text2.attr({transform:"S"+l+","+l+","+(a.x+a.width/2)+","+a.y})},i.prototype.drawEmptyDonutLabel=function(t,A,e,i,n){var s;return s=this.raphael.text(t,A,"").attr("font-size",i).attr("fill",e),null!=n&&s.attr("font-weight",n),s},i.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},i}(A.EventEmitter),A.DonutSegment=function(t){function A(t,A,e,i,n,r,o,a,l,h){this.cx=t,this.cy=A,this.inner=e,this.outer=i,this.color=o,this.backgroundColor=a,this.index=l,this.raphael=h,this.deselect=s(this.deselect,this),this.select=s(this.select,this),this.sin_p0=Math.sin(n),this.cos_p0=Math.cos(n),this.sin_p1=Math.sin(r),this.cos_p1=Math.cos(r),this.is_long=r-n>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return o(A,t),A.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},A.prototype.calcSegment=function(t,A){var e,i,n,s,r,o,a,l,h,c;return h=this.calcArcPoints(t),e=h[0],n=h[1],i=h[2],s=h[3],c=this.calcArcPoints(A),r=c[0],a=c[1],o=c[2],l=c[3],"M"+e+","+n+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+s)+("L"+o+","+l)+("A"+A+","+A+",0,"+this.is_long+",1,"+r+","+a)+"Z"},A.prototype.calcArc=function(t){var A,e,i,n,s;return s=this.calcArcPoints(t),A=s[0],i=s[1],e=s[2],n=s[3],"M"+A+","+i+("A"+t+","+t+",0,"+this.is_long+",0,"+e+","+n)},A.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})},A.prototype.drawDonutArc=function(t,A){return this.raphael.path(t).attr({stroke:A,"stroke-width":2,opacity:0})},A.prototype.drawDonutSegment=function(t,A,e,i,n){return this.raphael.path(t).attr({fill:A,stroke:e,"stroke-width":3}).hover(i).click(n)},A.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},A.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},A}(A.EventEmitter)}).call(this);